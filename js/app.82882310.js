(function(e){function t(t){for(var o,r,i=t[0],l=t[1],c=t[2],d=0,u=[];d<i.length;d++)r=i[d],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&u.push(n[r][0]),n[r]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);m&&m(t);while(u.length)u.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],o=!0,r=1;r<a.length;r++){var l=a[r];0!==n[l]&&(o=!1)}o&&(s.splice(t--,1),e=i(i.s=a[0]))}return e}var o={},n={app:0},s=[];function r(e){return i.p+"js/"+({about:"about"}[e]||e)+"."+{about:"057770c5"}[e]+".js"}function i(t){if(o[t])return o[t].exports;var a=o[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.e=function(e){var t=[],a=n[e];if(0!==a)if(a)t.push(a[2]);else{var o=new Promise((function(t,o){a=n[e]=[t,o]}));t.push(a[2]=o);var s,l=document.createElement("script");l.charset="utf-8",l.timeout=120,i.nc&&l.setAttribute("nonce",i.nc),l.src=r(e);var c=new Error;s=function(t){l.onerror=l.onload=null,clearTimeout(d);var a=n[e];if(0!==a){if(a){var o=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+o+": "+s+")",c.name="ChunkLoadError",c.type=o,c.request=s,a[1](c)}n[e]=void 0}};var d=setTimeout((function(){s({type:"timeout",target:l})}),12e4);l.onerror=l.onload=s,document.head.appendChild(l)}return Promise.all(t)},i.m=e,i.c=o,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(a,o,function(t){return e[t]}.bind(null,o));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var m=c;s.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var o=a("2b0e"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("div",{attrs:{id:"navigation-container"}},[a("navbar")],1),a("div",[a("router-view")],1)])},s=[],r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-navbar",{attrs:{type:"dark",variant:"dark"}},[a("b-navbar-nav",[a("b-nav-item",{attrs:{"exact-active-class":"active",to:"/"}},[e._v("Home")]),a("b-nav-item",{attrs:{"exact-active-class":"active",to:"/about"}},[e._v("About")]),e.CanManagerInvetory?a("b-nav-item",{attrs:{"exact-active-class":"active",to:"/loan"}},[e._v("Udlån/Forbrug")]):e._e(),e.CanManagerInvetory?a("b-nav-item",{attrs:{"exact-active-class":"active",to:"/loanhistory"}},[e._v("Udlåns log")]):e._e(),e.CanManagerInvetory?a("b-nav-item",{attrs:{"exact-active-class":"active",to:"/consumtionhistory"}},[e._v("Forbrugs log")]):e._e()],1),a("b-navbar-nav",{staticClass:"ml-auto"},[e.isAuthenticated?a("b-nav-item-dropdown",{attrs:{right:""},scopedSlots:e._u([{key:"button-content",fn:function(){return[a("em",[e._v(e._s(e.username))])]},proxy:!0}],null,!1,1747042283)},[e.isManager?a("b-dropdown-item",{attrs:{to:"/management"}},[e._v("Management")]):e._e(),a("b-dropdown-item",{directives:[{name:"b-modal",rawName:"v-b-modal.ChangePassword",modifiers:{ChangePassword:!0}}]},[e._v("Change Password")]),a("b-dropdown-item",{on:{click:e.logout}},[e._v("Sign Out")])],1):a("b-nav-item",{attrs:{"exact-active-class":"active",to:"/login"}},[e._v("Login")]),e.isAuthenticated?e._e():a("b-nav-item",{attrs:{"exact-active-class":"active",to:"/register"}},[e._v("Register")])],1)],1),a("ChangePassword")],1)},i=[],l={name:"Navigation",computed:{isAuthenticated:function(){return this.$store.getters["auth/isAuthenticated"]},username:function(){return this.$store.getters["auth/username"]},isManager:function(){return this.$store.getters["auth/isManager"]},CanManagerInvetory:function(){return this.$store.getters["auth/CanManagerInvetory"]}},methods:{logout:function(){var e=this;this.$store.dispatch("auth/destroyToken").then((function(){e.$router.push("/")}))}}},c=l,d=a("2877"),m=Object(d["a"])(c,r,i,!1,null,null,null),u=m.exports,g={name:"App",components:{navbar:u}},h=g,b=(a("5c0b"),Object(d["a"])(h,n,s,!1,null,null,null)),f=b.exports,p=(a("45fc"),a("d3b7"),a("8c4f")),v=a("2f62"),y=(a("caad"),a("2532"),a("bc3a")),I=a.n(y),w="https://skplagerapi.azurewebsites.net/api/",k={namespaced:!0,state:{token:localStorage.getItem("access_token")||null,user:{username:"",departmentName:"",roleNames:[]}},getters:{isAuthenticated:function(e){return null!==e.token},username:function(e){return e.user.username},isManager:function(e){return!!e.user.roleNames.includes("Manager")},CanManagerInvetory:function(e){return!(!e.user.roleNames.includes("InventoryManager")&&!e.user.roleNames.includes("Manager"))}},mutations:{getToken:function(e,t){e.token=t},destroyToken:function(e){e.token=null,e.user=null},getUser:function(e,t){e.user=t}},actions:{getToken:function(e,t){return new Promise((function(a,o){I.a.post(w+"account/token",{username:t.username,password:t.password}).then((function(t){var o=t.data;localStorage.setItem("access_token",o),I.a.defaults.headers.common["Authorization"]="bearer "+o,e.commit("getToken",o),e.dispatch("getUser").then(a(t))})).catch((function(e){console.log(e),o(e)}))}))},refreshToken:function(e){return new Promise((function(t,a){I.a.post(w+"account/refresh_token").then((function(o){var n=o.data;localStorage.setItem("access_token",n),I.a.defaults.headers.common["Authorization"]="bearer "+n,e.commit("getToken",n),e.dispatch("getUser").then(t(o)).catch(a())})).catch((function(t){console.log(t),localStorage.removeItem("access_token"),delete I.a.defaults.headers.common["Authorization"],e.commit("destroyToken"),a(t)}))}))},destroyToken:function(e){if(e.getters.isAuthenticated)return new Promise((function(t){localStorage.removeItem("access_token"),delete I.a.defaults.headers.common["Authorization"],e.commit("destroyToken"),t(!0)}))},getUser:function(e){return new Promise((function(t,a){I.a.get(w+"account/getCurrentUser").then((function(a){var o=a.data;e.commit("getUser",o),t(o)})).catch((function(e){console.log(e),a(e)}))}))},changePassword:function(e,t){return new Promise((function(e,a){I.a.post(w+"account/change_password",t).then((function(t){e(t)})).catch((function(e){console.log(e),a(e)}))}))},Register:function(e,t){return new Promise((function(a,o){I.a.post(w+"account/register",t).then((function(t){var o=t.data;localStorage.setItem("access_token",o),I.a.defaults.headers.common["Authorization"]="bearer "+o,e.commit("getToken",o),e.dispatch("getUser").then(a(t))})).catch((function(e){o(e)}))}))}}},_={namespaced:!0,state:{},getters:{},mutations:{},actions:{}},C=(a("c975"),a("d81d"),a("a434"),"https://skplagerapi.azurewebsites.net/api/"),M={namespaced:!0,state:{userList:[]},getters:{getUsers:function(e){return e.userList}},mutations:{UpdateUserList:function(e,t){e.userList=t},RemoveUserFromList:function(e,t){e.userList.splice(e.userList.map((function(e){return e.userId})).indexOf(t),1)},removeUsers:function(e){e.userList=[]}},actions:{GetUsersWithoutDepartment:function(e){return new Promise((function(t,a){e.commit("removeUsers"),I.a.get(C+"user/get_users_without_department").then((function(a){var o=a.data;e.commit("UpdateUserList",o),t(a)})).catch((function(e){e.message=e.response.data,console.log(e),a(e)}))}))},GetUsersFromDepartment:function(e){return new Promise((function(t,a){e.commit("removeUsers"),I.a.get(C+"User/get_users_from_department").then((function(a){var o=a.data;e.commit("UpdateUserList",o),t(o)})).catch((function(e){e.message=e.response.data,console.log(e),a(e)}))}))},GetBasicUsersFromDepartment:function(e){return new Promise((function(e,t){I.a.get(C+"User/get_users_from_department").then((function(t){var a=t.data;e(a)})).catch((function(e){e.message=e.response.data,console.log(e),t(e)}))}))},addUserToDepartment:function(e,t){return new Promise((function(a,o){I.a.post(C+"user/add_department_user",{userId:t}).then((function(o){e.commit("RemoveUserFromList",t),a(o)})).catch((function(e){console.log(e),o(e)}))}))},updateRoles:function(e,t){return new Promise((function(e,a){I.a.post(C+"roleuser/update_user_roles",{UserId:t.userId,Roles:t.roles}).then((function(t){e(t)})).catch((function(e){console.log(e),a(e)}))}))},RemoveUserFromDepartment:function(e,t){return new Promise((function(a,o){I.a.put(C+"user/delete_department_user",{userId:t}).then((function(o){e.commit("RemoveUserFromList",t),a(o)})).catch((function(e){console.log(e),o(e)}))}))},editUser:function(e,t){return new Promise((function(e,a){I.a.put(C+"user/edit_user",{UserId:t.userId,FirstName:t.firstName,LastName:t.lastName,Email:t.email,Username:t.username}).then((function(t){e(t)})).catch((function(e){console.log(e),a(e)}))}))},addRoleToUser:function(e,t){return new Promise((function(e,a){I.a.post(C+"roleuser/add_roleuser",{RoleName:t.roleName,UserId:t.userId}).then((function(t){e(t)})).catch((function(e){console.log(e),a(e)}))}))},resetPassword:function(e,t){return new Promise((function(e,a){I.a.post(C+"user/reset_password",t).then((function(t){e(t)})).catch((function(e){console.log(e),a(e)}))}))}}},S="https://skplagerapi.azurewebsites.net/api/",x={namespaced:!0,state:{item:{},History:[]},getters:{ItemIsLoaded:function(e){return e.item!={}},Item:function(e){return e.item},GetItems:function(e){return e.History}},mutations:{UpdateItem:function(e,t){e.item=t},UpdateHistory:function(e,t){e.History=t},clearHistory:function(e){e.History=[]}},actions:{GetLoanHistory:function(e){return new Promise((function(t,a){e.commit("clearHistory"),I.a.get(S+"userloan/get_all_loans").then((function(a){e.commit("UpdateHistory",a.data),t(a)})).catch((function(e){console.log(e.response.data),a(e)}))}))},GetConsumptionHistory:function(e){return new Promise((function(t,a){e.commit("clearHistory"),I.a.get(S+"userConsumption/get_all_userConsumptions").then((function(a){e.commit("UpdateHistory",a.data),t(a)})).catch((function(e){console.log(e.response.data),a(e)}))}))},FindItem:function(e,t){return new Promise((function(a,o){I.a.get(S+"itembarcode/find_item",{params:t}).then((function(t){var o=t.data;e.commit("UpdateItem",o),a(o)})).catch((function(e){console.log(e.response.data),o(e)}))}))},LoanItem:function(e,t){return new Promise((function(e,a){I.a.post(S+"userloan/add_loan",t).then((function(t){e(t)})).catch((function(e){console.log(e.response.data),a(e)}))}))},ConsumeItem:function(e,t){return new Promise((function(e,a){I.a.post(S+"userConsumption/add_userConsumption",t).then((function(t){e(t)})).catch((function(e){console.log(e.response.data),a(e)}))}))},getReturnLoanUsers:function(e,t){return new Promise((function(e,a){I.a.get(S+"userloan/Find_Loans_By_Barcode",{params:{barcode:t}}).then((function(t){var a=t.data;e(a)})).catch((function(e){console.log(e.response.data),a(e)}))}))},ReturnItem:function(e,t){return console.log(t),new Promise((function(e,a){I.a.delete(S+"userloan/delete_loan",{params:t}).then((function(t){e(t)})).catch((function(e){e.message=e.response.data,console.log(e),a(e)}))}))}}},F="https://skplagerapi.azurewebsites.net/api/",U={namespaced:!0,state:{UserLoansList:[]},getters:{getUserLoans:function(e){return e.UserLoansList}},mutations:{updateUserLoansList:function(e,t){e.UserLoansList=t},removeUserLoanFromList:function(e,t){e.UserLoansList.splice(e.UserLoansList.map((function(e){return e.loanId})).indexOf(t),1)},removeUserLoans:function(e){e.UserLoansList=[]}},actions:{GetUserLoans:function(e,t){return new Promise((function(a,o){e.commit("removeUserLoans"),I.a.get(F+"userloan/get_all_loans",{params:{showAvailableItems:t}}).then((function(t){var o=t.data;e.commit("updateUserLoansList",o),a(t)})).catch((function(e){e.message=e.response.data,console.log(e),o(e)}))}))}}},P=(a("4160"),a("159b"),"https://skplagerapi.azurewebsites.net/api/"),L={namespaced:!0,state:{ItemsList:[],CategoriesList:[],ImagesList:[]},getters:{getItems:function(e){return e.ItemsList},getImages:function(e){return e.ImagesList},getCategories:function(e){return e.CategoriesList}},mutations:{updateCategoryList:function(e,t){t.forEach((function(t){e.CategoriesList.push({id:t.categoryID,value:t.categoryName})}))},removeCategoryFromList:function(e,t){e.CategoriesList.splice(e.CategoryList.map((function(e){return e.categoryId})).indexOf(t),1)},removeCategory:function(e){e.CategoriesList=[]},addImageToList:function(e,t){e.ImagesList.push(t)},updateImageList:function(e,t){e.ImagesList=t},removeImageFromList:function(e,t){e.ImagesList.splice(e.ImagesList.map((function(e){return e.imageId})).indexOf(t),1)},removeImage:function(e){e.ImagesList=[]},updateItemList:function(e,t){e.ItemsList=t},removeItemFromList:function(e,t){e.ItemsList.splice(e.ItemsList.map((function(e){return e.itemId})).indexOf(t),1)},removeItems:function(e){e.ItemsList=[]}},actions:{getCategories:function(e){return new Promise((function(t,a){e.commit("removeCategory"),I.a.get(P+"category/get_all_categories").then((function(a){var o=a.data;e.commit("updateCategoryList",o),t(a)})).catch((function(t){t.message=t.response.data,e.commit("updateCategoryList",{categoryID:0,categoryName:"Ingen kategorier"}),console.log(t),a(t)}))}))},uploadImage:function(e,t){return new Promise((function(a,o){I.a.post(P+"image/upload_images",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){var o=t.data;o={imageId:o.id,imageName:o.imageName,imageUri:o.imageUri,departmentId:o.departmentId},e.commit("addImageToList",o),a(o)})).catch((function(e){e.message=e.response.data,console.log(e),o(e)}))}))},getImages:function(e){return new Promise((function(t,a){e.commit("removeImage"),I.a.get(P+"image/get_all_images").then((function(a){var o=a.data;e.commit("updateImageList",o),t(a)})).catch((function(e){e.message=e.response.data,console.log(e),a(e)}))}))},getLoanItems:function(e,t){return new Promise((function(a,o){e.commit("removeItems"),I.a.get(P+"loanItem/get_all_loan_items",{params:{inventoryId:t}}).then((function(t){var o=t.data;e.commit("updateItemList",o),a(t)})).catch((function(e){e.message=e.response.data,console.log(e),o(e)}))}))},addLoanItem:function(e,t){return new Promise((function(e,a){I.a.post(P+"loanitem/add_loan_item",t).then((function(t){e(t)})).catch((function(e){e.message=e.response.data,console.log(e),a(e)}))}))},editLoanItem:function(e,t){return new Promise((function(e,a){I.a.put(P+"loanItem/edit_loan_item",t).then((function(t){e(t)})).catch((function(e){e.message=e.response.data,console.log(e),a(e)}))}))},deleteLoanItem:function(e,t){return new Promise((function(a,o){I.a.delete(P+"loanItem/delete_loan_item",{params:t}).then((function(o){e.commit("removeItemFromList",t),a(o)})).catch((function(e){e.message=e.response.data,console.log(e),o(e)}))}))},getConsumptionItems:function(e,t){return new Promise((function(a,o){e.commit("removeItems"),I.a.get(P+"consumptionItem/get_all_consumption_items",{params:{inventoryId:t}}).then((function(t){var o=t.data;e.commit("updateItemList",o),a(t)})).catch((function(e){e.message=e.response.data,console.log(e),o(e)}))}))},addConsumptionItem:function(e,t){return new Promise((function(e,a){I.a.post(P+"consumptionitem/add_consumption_item",t).then((function(t){e(t)})).catch((function(e){e.message=e.response.data,console.log(e),a(e)}))}))},editConsumptionItem:function(e,t){return new Promise((function(e,a){I.a.put(P+"consumptionItem/edit_consumption_item",t).then((function(t){e(t)})).catch((function(e){e.message=e.response.data,console.log(e),a(e)}))}))},deleteConsumptionItem:function(e,t){return new Promise((function(a,o){I.a.delete(P+"consumptionItem/delete_consumption_item",{params:t}).then((function(o){e.commit("removeItemFromList",t),a(o)})).catch((function(e){e.message=e.response.data,console.log(e),o(e)}))}))}}},B="https://skplagerapi.azurewebsites.net/api/",R={namespaced:!0,state:{BarcodesList:[]},getters:{getBarcodes:function(e){return e.BarcodesList}},mutations:{updateItemList:function(e,t){e.BarcodesList=t},removeItemFromList:function(e,t){e.BarcodesList.splice(e.BarcodesList.map((function(e){return e.barcodeId})).indexOf(t),1)},removeItems:function(e){e.BarcodesList=[]}},actions:{addBarcodeToItem:function(e,t){return new Promise((function(e,a){I.a.post(B+"itemBarcode/add_barcode_to_item",t).then((function(t){e(t)})).catch((function(e){e.message=e.response.data,console.log(e),a(e)}))}))},removeBarcodeFromItem:function(e,t){return new Promise((function(e,a){I.a.delete(B+"itemBarcode/remove_barcode_from_item",{params:t}).then((function(t){e(t)})).catch((function(e){e.message=e.response.data,console.log(e),a(e)}))}))}}},N="https://skplagerapi.azurewebsites.net/api/",T={namespaced:!0,state:{CategoriesList:[]},getters:{getCategories:function(e){return e.CategoriesList}},mutations:{updateCategoryList:function(e,t){t.forEach((function(t){e.CategoriesList.push({categoryId:t.categoryID,categoryName:t.categoryName})}))},removeCategoryFromList:function(e,t){e.CategoriesList.splice(e.CategoriesList.map((function(e){return e.categoryId})).indexOf(t),1)},removeCategory:function(e){e.CategoriesList=[]}},actions:{getCategories:function(e){return new Promise((function(t,a){e.commit("removeCategory"),I.a.get(N+"category/get_all_categories").then((function(a){var o=a.data;e.commit("updateCategoryList",o),t(a)})).catch((function(t){t.message=t.response.data,e.commit("updateCategoryList",{categoryId:0,categoryName:"Ingen kategorier"}),console.log(t),a(t)}))}))},addCategory:function(e,t){return new Promise((function(e,a){I.a.post(N+"category/add_category",t).then((function(t){e(t)})).catch((function(e){e.message=e.response.data,console.log(e),a(e)}))}))},editCategory:function(e,t){return new Promise((function(e,a){I.a.put(N+"category/edit_category",t).then((function(t){e(t)})).catch((function(e){e.message=e.response.data,console.log(e),a(e)}))}))},deleteCategory:function(e,t){return new Promise((function(a,o){I.a.delete(N+"category/delete_category",{params:t}).then((function(o){var n=t;e.commit("removeCategoryFromList",n),a(o)})).catch((function(e){e.message=e.response.data,console.log(e),o(e)}))}))}}};o["default"].use(v["a"]);var A=new v["a"].Store({modules:{auth:k,admin:_,UserManagement:M,LCF:x,userInventory:U,inventoryManagement:L,barcodeManagement:R,categoryManagement:T}});var $,D,E,j,O,z,q,G,K=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"home"},[e._v(" Home "),a("button",{style:e.style,on:{mouseover:e.mouseover,mouseleave:e.mouseleave}},[e._v("test")])])},V=[],H={name:"home",data:function(){return{style:""}},methods:{mouseover:function(){this.style="color: blue;"},mouseleave:function(){this.style=""}}},Z=H,J=Object(d["a"])(Z,K,V,!1,null,null,null),W=J.exports,Q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-container",[a("div",{staticClass:"login"},[a("div",{staticClass:"loginboard"},[a("div",{staticClass:"dash-content"},[a("div",{staticClass:"dash-header"},[a("h4",[e._v("Opret ny bruger")])]),a("div",{staticClass:"dash-body"},[a("h5",[e._v("Login")]),a("label",[e._v("Username")]),a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Indtast dit brugernavn her..."},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}})]),a("label",[e._v("Password")]),a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",placeholder:"Indtast dit password her..."},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})])]),a("div",{staticClass:"dash-footer"},[a("button",{staticClass:"btn btn-success",attrs:{disabled:e.IsFetching},on:{click:function(t){return e.login()}}},[e._v("Login")])])])])])])},X=[],Y={name:"Login",data:function(){return{username:"",password:"",IsFetching:!1}},methods:{login:function(){var e=this;this.IsFetching=!0,this.$store.dispatch("auth/getToken",{username:this.username,password:this.password}).then((function(){e.IsFetching=!1,e.$router.push("/")})).catch((function(){e.IsFetching=!1}))}}},ee=Y,te=Object(d["a"])(ee,Q,X,!1,null,null,null),ae=te.exports,oe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-container",{staticStyle:{"margin-top":"2%",width:"40%"}},[a("b-row",[a("b-col",{attrs:{lg:"6"}},[a("b-form-group",{attrs:{label:"Fornavn:"}},[a("b-form-input",{attrs:{required:"",type:"text",placeholder:"Fornavn"},model:{value:e.newUser.firstname,callback:function(t){e.$set(e.newUser,"firstname",t)},expression:"newUser.firstname"}})],1)],1),a("b-col",{attrs:{lg:"6"}},[a("b-form-group",{attrs:{label:"Efternavn:"}},[a("b-form-input",{attrs:{required:"",type:"text",placeholder:"Efternavn"},model:{value:e.newUser.lastname,callback:function(t){e.$set(e.newUser,"lastname",t)},expression:"newUser.lastname"}})],1)],1),a("b-col",{attrs:{lg:"6"}},[a("b-form-group",{attrs:{label:"Brugernavn:"}},[a("b-form-input",{attrs:{required:"",type:"text",placeholder:"Brugernavn"},model:{value:e.newUser.username,callback:function(t){e.$set(e.newUser,"username",t)},expression:"newUser.username"}})],1)],1),a("b-col",{attrs:{lg:"6"}},[a("b-form-group",{attrs:{label:"Email:"}},[a("b-form-input",{attrs:{required:"",type:"email",placeholder:"Email"},model:{value:e.newUser.email,callback:function(t){e.$set(e.newUser,"email",t)},expression:"newUser.email"}})],1)],1),a("b-col",{attrs:{lg:"6"}},[a("b-form-group",{attrs:{label:"Kodeord:"}},[a("b-form-input",{attrs:{required:"",type:"password",placeholder:"Kodeord",state:e.validPassword},model:{value:e.newUser.password,callback:function(t){e.$set(e.newUser,"password",t)},expression:"newUser.password"}}),a("b-form-invalid-feedback",{attrs:{state:e.validPassword}},[e._v("Kodeordet skal have et stort bogstav og et tal eller special tegn")])],1)],1),a("b-col",{attrs:{lg:"6"}},[a("b-form-group",{attrs:{label:"Bekræft kodeord:"}},[a("b-form-input",{attrs:{required:"",type:"password",placeholder:"Bekræft kodeord",state:e.PasswordsMatch},model:{value:e.newUser.PasswordConfirmation,callback:function(t){e.$set(e.newUser,"PasswordConfirmation",t)},expression:"newUser.PasswordConfirmation"}}),a("b-form-invalid-feedback",{attrs:{state:e.PasswordsMatch}},[e._v("Kodeordet matcher ikke")])],1)],1)],1),a("b-button",{attrs:{disabled:e.IsFetching,variant:"success"},on:{click:function(t){return e.register()}}},[e._v("Register")])],1)},ne=[],se=(a("4d63"),a("ac1f"),a("25f0"),{name:"Register",data:function(){return{newUser:{firstname:"",lastname:"",username:"",email:"",password:"",PasswordConfirmation:"",IsFetching:!1}}},computed:{validPassword:function(){var e=new RegExp("^((?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])|(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[^a-zA-Z0-9])|(?=.*?[A-Z])(?=.*?[0-9])(?=.*?[^a-zA-Z0-9])|(?=.*?[a-z])(?=.*?[0-9])(?=.*?[^a-zA-Z0-9])).{8,}$");return e.test(this.newUser.password)},PasswordsMatch:function(){return this.newUser.password==this.newUser.PasswordConfirmation}},methods:{register:function(){var e=this;this.IsFetching=!0,this.$store.dispatch("auth/Register",this.newUser).then((function(){e.IsFetching=!1,e.$router.push("/")})).catch((function(){e.IsFetching=!1}))}}}),re=se,ie=Object(d["a"])(re,oe,ne,!1,null,null,null),le=ie.exports,ce=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"d-flex"},[a("div",[a("sidebar")],1),a("div",{staticStyle:{display:"contents"}},[a("router-view")],1)])},de=[],me=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-nav",{staticClass:"wrapper",attrs:{vertical:""}},[a("b-button",{on:{click:function(t){e.isSidebarExpanded=!e.isSidebarExpanded}}},[e._v(e._s(e.isSidebarExpanded?"-":"+"))]),a("div",{staticClass:"sidebar-wrapper",class:e.sidebarClasses},[a("b-nav-item",{attrs:{"exact-active-class":"active",to:"/management"}},[e._v(e._s(e.DepartmnetName))]),a("b-nav-item",{attrs:{"exact-active-class":"active",to:"/management/AddUsersToDepartment"}},[e._v("Tilføj til afdeling")]),a("b-nav-item",{attrs:{"exact-active-class":"active",to:"/management/CategoryManagement"}},[e._v("Kategorier")]),a("b-nav-item",{attrs:{"exact-active-class":"active",to:"/management/LoanManagement"}},[e._v("Udlån")]),a("b-nav-item",{attrs:{"exact-active-class":"active",to:"/management/ConsumptionManagement"}},[e._v("Forbrug")])],1)],1)},ue=[],ge={name:"sidebar",data:function(){return{isSidebarExpanded:!1}},computed:{sidebarClasses:function(){var e=[];return this.isSidebarExpanded&&e.push("expanded"),e},DepartmnetName:function(){return this.$store.state.auth.user.departmentName}}},he=ge,be=Object(d["a"])(he,me,ue,!1,null,null,null),fe=be.exports,pe={name:"adminIndex",components:{sidebar:fe}},ve=pe,ye=Object(d["a"])(ve,ce,de,!1,null,null,null),Ie=ye.exports,we=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-container",{attrs:{fluid:""}},[a("b-row",[a("b-col",{staticClass:"my-1",attrs:{lg:"6"}},[a("b-button-group",{staticClass:"mt-1"},[a("b-button",{attrs:{disabled:e.isFetching},on:{click:e.loadData}},[e._v("Opdater tabel")]),a("b-button",{directives:[{name:"show",rawName:"v-show",value:e.isFetching,expression:"isFetching"}],on:{click:e.cancel}},[e._v("Cancel")])],1)],1),a("b-col",{staticClass:"my-1",attrs:{lg:"6"}},[a("b-input-group",{attrs:{size:"sm"}},[a("b-form-input",{attrs:{type:"search",id:"filterInput",placeholder:"Skriv for at søge..."},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1)],1),a("div",{staticClass:"tablecontainer"},[a("b-table",{attrs:{id:"departmentTable",outlined:"",busy:e.isFetching,items:e.Users,fields:e.fields,filter:e.search,"show-empty":"","per-page":e.perPage,"current-page":e.currentPage,"primary-key":"username","sort-by":e.sortBy},on:{filtered:e.onFilter,"update:sortBy":function(t){e.sortBy=t},"update:sort-by":function(t){e.sortBy=t}},scopedSlots:e._u([{key:"head(button)",fn:function(){return[a("b-button",{on:{click:function(t){e.sortBy="",e.search=""}}},[e._v("Nulstil filter")])]},proxy:!0},{key:"table-busy",fn:function(){return[a("div",{staticClass:"text-center text-danger my-2"},[a("b-spinner",{staticClass:"align-middle"}),a("strong",[e._v("Loading...")])],1)]},proxy:!0},{key:"empty",fn:function(t){return[a("h4",[e._v("Vi kunne ikke finde nogen brugere der ikke er i en afdeling...")]),a("b-button",{on:{click:e.loadData}},[e._v("Refresh table")])]}},{key:"cell(button)",fn:function(t){return[a("b-col",{attrs:{lg:"4"}},[a("b-button",{attrs:{variant:"warning"},on:{click:function(a){return e.editUser(t.item)}}},[e._v("Rediger")])],1),a("b-col",{attrs:{lg:"4"}},[a("b-button",{attrs:{variant:"danger",disabled:t.item.roles.includes("Manager")||t.item.roles.includes("Admin")},on:{click:function(a){return e.DeleteUser(t.item.userId)}}},[e._v("Fjern")])],1)]}}])})],1),e.totalRows>10?a("b-pagination",{attrs:{align:"center","total-rows":e.totalRows,"per-page":e.perPage,"aria-controls":"departmentTable"},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}}):e._e(),a("b-modal",{attrs:{"cancel-title":"Annuller",id:"editUserModal","no-close-on-backdrop":"",size:"xl",title:"Rediger lager"},on:{ok:e.submitEdittedUser},scopedSlots:e._u([{key:"modal-footer",fn:function(t){var o=t.ok,n=t.cancel;return[a("div",{staticClass:"w-100"},[a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.ResetPasswordModal",modifiers:{ResetPasswordModal:!0}}],staticClass:"float-left",attrs:{variant:"primary"}},[e._v("Reset Password")]),a("b-button",{staticClass:"float-right",staticStyle:{"margin-left":"5px"},attrs:{variant:"success"},on:{click:function(e){return o()}}},[e._v("OK")]),a("b-button",{staticClass:"float-right",attrs:{variant:"danger"},on:{click:function(e){return n()}}},[e._v("Cancel")])],1)]}}]),model:{value:e.showEditModal,callback:function(t){e.showEditModal=t},expression:"showEditModal"}},[a("b-form",[a("b-row",[a("b-col",{staticStyle:{"margin-bottom":"15px"},attrs:{lg:"4"}},[a("label",[e._v("Brugernavn:")]),a("b-form-input",{attrs:{name:"Username",type:"text",required:"",placeholder:"Brugernavn"},model:{value:e.SelectedUser.username,callback:function(t){e.$set(e.SelectedUser,"username",t)},expression:"SelectedUser.username"}})],1),a("b-col",{attrs:{lg:"4"}},[a("label",[e._v("Fornavn:")]),a("b-form-input",{attrs:{type:"text",required:"",placeholder:"Fornavn"},model:{value:e.SelectedUser.firstName,callback:function(t){e.$set(e.SelectedUser,"firstName",t)},expression:"SelectedUser.firstName"}})],1),a("b-col",{attrs:{lg:"4"}},[a("label",[e._v("Efternavn:")]),a("b-form-input",{attrs:{type:"text",required:"",placeholder:"Efternavn"},model:{value:e.SelectedUser.lastName,callback:function(t){e.$set(e.SelectedUser,"lastName",t)},expression:"SelectedUser.lastName"}})],1),a("b-col",{attrs:{lg:"4"}},[a("label",[e._v("Email:")]),a("b-form-input",{attrs:{type:"email",required:"",placeholder:"Email"},model:{value:e.SelectedUser.email,callback:function(t){e.$set(e.SelectedUser,"email",t)},expression:"SelectedUser.email"}})],1),a("b-col",{attrs:{lg:"4"}},[a("label",[e._v("LagerManager:")]),a("b-form-checkbox",{attrs:{value:"InventoryManager","unchecked-value":""},model:{value:e.SelectedUser.roles,callback:function(t){e.$set(e.SelectedUser,"roles",t)},expression:"SelectedUser.roles"}},[e._v("- LagerManager")])],1)],1)],1)],1),a("ResetPassword",{attrs:{user:e.SelectedUser}})],1)},ke=[],_e=a("bb45"),Ce=a.n(_e),Me={name:"DepartmentManager",mixins:[Ce.a],data:function(){return{fields:[{key:"username",label:"Brugernavn",sortable:!0},{key:"firstName",label:"Fornavn",sortable:!0},{key:"lastName",label:"Efternavn",sortable:!0},"email",{key:"button",label:""}],isFetching:!0,failedFetches:0,search:"",currentPage:1,totalRows:0,perPage:10,sortBy:"",SelectedUser:{},showEditModal:!1}},computed:{Users:function(){return this.$store.getters["UserManagement/getUsers"]},UserAmount:function(){return this.$store.getters["UserManagement/getUsers"].length}},methods:{submitEdittedUser:function(){var e=this;this.$store.dispatch("UserManagement/editUser",this.SelectedUser).then((function(){e.$store.dispatch("UserManagement/updateRoles",e.SelectedUser).then((function(){e.loadData()}))}))},DeleteUser:function(e){var t=this;this.$store.dispatch("UserManagement/RemoveUserFromDepartment",e).then((function(){t.totalRows--}))},editUser:function(e){Object.assign(this.SelectedUser,e),this.showEditModal=!0},addUserToDepartment:function(e){var t=this;this.$store.dispatch("UserManagement/addUserToDepartment",e).then((function(){t.totalRows--}))},loadData:function(){var e=this;this.isFetching=!0,this.$store.dispatch("UserManagement/GetUsersFromDepartment").then((function(){console.log("Got some data, now lets show something in this component"),e.totalRows=e.UserAmount,e.isFetching=!1,e.failedFetches=0})).catch((function(){console.log("no users"),e.totalRows=0,e.failedFetches++,e.failedFetches<=5?$=setTimeout((function(){e.loadData()}),5e3):(e.isFetching=!1,e.failedFetches=0)}))},cancel:function(){clearTimeout($),this.failedFetches=0,this.isFetching=!1},onFilter:function(e){this.totalRows=e.length,this.currentPage=1}},created:function(){this.loadData()},mounted:function(){this.$smoothReflow({el:"#departmentTable"}),this.$smoothReflow({el:".tablecontainer"})}},Se=Me,xe=Object(d["a"])(Se,we,ke,!1,null,null,null),Fe=xe.exports,Ue=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-container",{attrs:{fluid:""}},[a("b-row",[a("b-col",{staticClass:"my-1",attrs:{lg:"6"}},[a("b-button-group",{staticClass:"mt-1"},[a("b-button",{attrs:{disabled:e.isFetching},on:{click:e.loadData}},[e._v("Opdater tabel")]),a("b-button",{directives:[{name:"show",rawName:"v-show",value:e.isFetching,expression:"isFetching"}],on:{click:e.cancel}},[e._v("Cancel")])],1)],1),a("b-col",{staticClass:"my-1",attrs:{lg:"6"}},[a("b-input-group",{attrs:{size:"sm"}},[a("b-form-input",{attrs:{type:"search",id:"filterInput",placeholder:"Skriv for at søge..."},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1)],1),a("div",{staticClass:"tablecontainer"},[a("b-table",{attrs:{id:"departmentTable",outlined:"",busy:e.isFetching,items:e.Users,fields:e.fields,filter:e.search,"show-empty":"","per-page":e.perPage,"current-page":e.currentPage,"primary-key":"username","sort-by":e.sortBy},on:{filtered:e.onFilter,"update:sortBy":function(t){e.sortBy=t},"update:sort-by":function(t){e.sortBy=t}},scopedSlots:e._u([{key:"head(button)",fn:function(t){return[a("b-button",{on:{click:function(t){e.sortBy="",e.search=""}}},[e._v("Nulstil filter")])]}},{key:"table-busy",fn:function(){return[a("div",{staticClass:"text-center text-danger my-2"},[a("b-spinner",{staticClass:"align-middle"}),a("strong",[e._v(" Loading...")])],1)]},proxy:!0},{key:"empty",fn:function(t){return[a("h4",[e._v("Vi kunne ikke finde nogen brugere der ikke er i en afdeling...")]),a("b-button",{on:{click:e.loadData}},[e._v("Refresh table")])]}},{key:"cell(button)",fn:function(t){return[a("b-button",{on:{click:function(a){return e.addUserToDepartment(t.item.userId)}}},[e._v("Tilføj")])]}}])})],1),a("b-pagination",{attrs:{align:"center","total-rows":e.totalRows,"per-page":e.perPage,"aria-controls":"departmentTable"},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1)},Pe=[],Le={name:"DepartmentManager",mixins:[Ce.a],data:function(){return{fields:[{key:"username",label:"Brugernavn",sortable:!0},{key:"firstName",label:"Fornavn",sortable:!0},{key:"lastName",label:"Efternavn",sortable:!0},"email",{key:"button",label:""}],isFetching:!0,failedFetches:0,search:"",currentPage:1,totalRows:0,perPage:10,sortBy:""}},computed:{Users:function(){return this.$store.getters["UserManagement/getUsers"]},UserAmount:function(){return this.$store.getters["UserManagement/getUsers"].length}},methods:{addUserToDepartment:function(e){var t=this;this.$store.dispatch("UserManagement/addUserToDepartment",e).then((function(){t.totalRows--}))},loadData:function(){var e=this;this.isFetching=!0,this.$store.dispatch("UserManagement/GetUsersWithoutDepartment").then((function(){console.log("Got some data, now lets show something in this component"),e.totalRows=e.UserAmount,e.isFetching=!1,e.failedFetches=0})).catch((function(){console.log("no users"),e.totalRows=0,e.failedFetches++,e.failedFetches<=5?D=setTimeout((function(){e.loadData()}),5e3):(e.isFetching=!1,e.failedFetches=0)}))},cancel:function(){clearTimeout(D),this.failedFetches=0,this.isFetching=!1},onFilter:function(e){this.totalRows=e.length,this.currentPage=1}},created:function(){this.loadData()},mounted:function(){this.$smoothReflow({el:"#departmentTable"}),this.$smoothReflow({el:".tablecontainer"})}},Be=Le,Re=Object(d["a"])(Be,Ue,Pe,!1,null,null,null),Ne=Re.exports,Te=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-container",{staticStyle:{"margin-top":"2%"}},[a("b-card",{attrs:{"bg-variant":"light"}},[a("b-form-group",{staticClass:"mb-0",attrs:{label:e.FormTitleText,"label-class":"font-weight-bold pt-0"}},[a("b-row",{staticClass:"justify-content-center"},[a("div",{staticClass:"text-center col-md-1"},[a("b-form-checkbox",{staticClass:"noSelect",attrs:{disabled:e.IsConsumtionForm,size:"lg",switch:""},model:{value:e.IsReturnForm,callback:function(t){e.IsReturnForm=t},expression:"IsReturnForm"}},[e._v("⠀")]),a("label",[e._v("Aflevere")])],1),a("div",{staticClass:"text-center col-md-1"},[a("b-form-checkbox",{staticClass:"noSelect",attrs:{disabled:e.IsReturnForm,size:"lg",switch:""},model:{value:e.IsConsumtionForm,callback:function(t){e.IsConsumtionForm=t},expression:"IsConsumtionForm"}},[e._v("⠀")]),a("label",[e._v("Forbrug")])],1)]),a("b-row",[a("b-col",{attrs:{lg:"6"}},[a("b-form-group",{attrs:{label:"Vælg bruger:","label-align":"center"}}),a("div",{staticClass:"text-center"},[a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.SelectUserModal",modifiers:{SelectUserModal:!0}}],attrs:{id:"SelectUserButton",disabled:0==e.userList.length,pill:"",variant:"primary",size:"lg"}},[e._v(e._s(e.GetUserButtonText))])],1),e.userLoaded?a("div",{staticClass:"text-center",staticStyle:{"margin-top":"1%"}},[a("b-col",[a("label",[e._v("Brugernavn: "+e._s(e.user.username))])]),a("b-col",[a("label",[e._v("Navn: "+e._s(e.user.firstName)+" "+e._s(e.user.lastName))])])],1):e._e()],1),a("b-col",{attrs:{lg:"6"}},[a("b-form-group",{attrs:{label:"Vælg ting:","label-align":"center"}}),a("b-form-input",{attrs:{id:"loanform",readonly:"",required:"",placeholder:"Scan strejkode..."},model:{value:e.barcode,callback:function(t){e.barcode=t},expression:"barcode"}}),e.ItemIsLoaded?a("div",{staticStyle:{"margin-top":"1%"}},[a("b-img",{staticStyle:{height:"120px"},attrs:{left:"",fluid:"",src:e.imageUri}}),a("div",[a("b-col",[a("label",[e._v("Mærke: "+e._s(e.item.brand))])]),a("b-col",[a("label",[e._v("Model: "+e._s(e.item.model))])]),a("b-col",[a("label",[e._v("Kategory: "+e._s(e.item.category))])]),a("b-col",[a("label",{class:{"text-danger":0==e.item.amountLeft}},[e._v("Mængde: "+e._s(e.item.amountLeft))])])],1)],1):e._e()],1),e.IsConsumtionForm&&e.ItemIsLoaded?a("b-col",{staticStyle:{"margin-top":"1%","margin-bottom":"1%"},attrs:{lg:"12"}},[a("b-form-input",{staticClass:"float-right",staticStyle:{width:"10%"},attrs:{type:"number",placeholder:"Antal.."},model:{value:e.Amount,callback:function(t){e.Amount=t},expression:"Amount"}}),a("div",{staticClass:"float-right",staticStyle:{margin:"auto",width:"50%",padding:"10px"}},[a("label",{staticClass:"float-right"},[e._v("Antal")])])],1):e._e()],1),e.IsReturnForm||e.IsConsumtionForm?e.IsReturnForm?a("b-button",{attrs:{variant:"danger",disabled:!e.userLoaded||!e.ItemIsLoaded},on:{click:e.ReturnItem}},[e._v("Aflever")]):e.IsConsumtionForm?a("b-button",{attrs:{variant:"success",disabled:!e.userLoaded||!e.ItemIsLoaded||0==e.Amount},on:{click:e.ConsumeItem}},[e._v("Giv")]):e._e():a("b-button",{attrs:{variant:"success",disabled:!e.userLoaded||!e.ItemIsLoaded||0==e.item.amountLeft},on:{click:e.loanItem}},[e._v("Udlån")])],1)],1),a("SelectUserModal",{attrs:{UserList:e.userList,isFetching:e.isFetching},on:{load:e.loadData,cansel:e.cancelFetch},model:{value:e.user,callback:function(t){e.user=t},expression:"user"}})],1)},Ae=[],$e=(a("4fad"),a("e25e"),{name:"Loan",data:function(){return{user:{},userList:[],item:{},barcode:"",barcodeIsReading:!1,IsReturnForm:!1,isFetching:!1,failedFetches:0,IsConsumtionForm:!1,Amount:null}},computed:{userLoaded:function(){return!(0===Object.entries(this.user).length&&this.user.constructor===Object)},ItemIsLoaded:function(){return!(0===Object.entries(this.item).length&&this.item.constructor===Object)},GetUserButtonText:function(){return this.userLoaded?"Vælg anden bruger":"Vælg bruger"},imageUri:function(){return this.ItemIsLoaded?this.item.image.imageUri:"https://inventoryimagestorage.blob.core.windows.net/public-images/ImagePlaceholder.png"},FormTitleText:function(){return this.IsReturnForm?"Afleverings formular":this.IsConsumtionForm?"Forbrugs formular":"Udlånings formular"}},watch:{IsReturnForm:function(){this.IsReturnForm?this.ItemIsLoaded?this.getReturnUsers():this.userList=[]:this.loadData(),this.user={}},IsConsumtionForm:function(){""!=this.barcode&&this.getItem()}},methods:{getItem:function(){var e=this;this.$store.dispatch("LCF/FindItem",{barcode:this.barcode,IsLoan:!this.IsConsumtionForm}).then((function(t){e.item=t,e.IsReturnForm&&e.getReturnUsers()})).catch((function(){e.item={}}))},ReturnItem:function(){var e=this;this.$store.dispatch("LCF/ReturnItem",{userId:this.user.userId,itemBarcode:this.barcode}).then((function(){e.clearForm()}))},getReturnUsers:function(){var e=this;this.IsReturnForm?(this.userList=[],this.isFetching=!0,this.$store.dispatch("LCF/getReturnLoanUsers",this.barcode).then((function(t){console.log("Got some data, now lets show something in this component"),e.userList=t,e.isFetching=!1,e.failedFetches=0})).catch((function(){console.log("no users"),e.failedFetches++,e.failedFetches<=5?E=setTimeout((function(){e.getReturnUsers()}),5e3):(e.isFetching=!1,e.failedFetches=0)}))):this.cancelFetch()},loanItem:function(){var e=this;this.$store.dispatch("LCF/LoanItem",{userId:this.user.userId,ItemBarcode:this.barcode}).then((function(){e.clearForm()})).catch((function(){alert("error")}))},ConsumeItem:function(){var e=this;this.$store.dispatch("LCF/ConsumeItem",{UserId:this.user.userId,ItemBarcode:this.barcode,ItemAmount:parseInt(this.Amount)}).then((function(){e.clearForm()})).catch((function(){alert("error")}))},loadData:function(){var e=this;this.IsReturnForm?this.cancelFetch():(this.isFetching=!0,this.userList=[],this.$store.dispatch("UserManagement/GetBasicUsersFromDepartment").then((function(t){console.log("Got some data, now lets show something in this component"),e.userList=t,e.isFetching=!1,e.failedFetches=0})).catch((function(){console.log("no users"),e.failedFetches++,e.failedFetches<=5?E=setTimeout((function(){e.loadData()}),5e3):(e.isFetching=!1,e.failedFetches=0)})))},cancelFetch:function(){clearTimeout(E),this.failedFetches=0,this.isFetching=!1},clearForm:function(){this.barcode="",this.item={},this.user={},this.IsReturnForm&&(this.userList=[])},BarcodeReader:function(e){var t=String.fromCharCode(e.keyCode);13==e.keyCode&&this.barcodeIsReading&&(this.barcodeIsReading=!1,this.getItem()),this.barcodeIsReading&&(this.barcode+=t),"ß"==t&&(this.barcodeIsReading=!0,this.barcode="","activeElement"in document&&document.activeElement.blur())}},created:function(){this.loadData()},mounted:function(){document.addEventListener("keypress",this.BarcodeReader)},destroyed:function(){document.removeEventListener("keypress",this.BarcodeReader)}}),De=$e,Ee=Object(d["a"])(De,Te,Ae,!1,null,null,null),je=Ee.exports,Oe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-container",[a("b-row",[a("b-col",{staticClass:"my-1",attrs:{lg:"6"}},[a("b-button-group",{staticClass:"mt-1"},[a("b-button",{attrs:{disabled:e.isFetching},on:{click:e.loadData}},[e._v("Opdater tabel")]),a("b-button",{directives:[{name:"show",rawName:"v-show",value:e.isFetching,expression:"isFetching"}],on:{click:e.cancelFetch}},[e._v("Cancel")])],1)],1),a("b-col",{staticClass:"my-1",attrs:{lg:"6"}},[a("b-input-group",{attrs:{size:"sm"}},[a("b-form-input",{attrs:{type:"search",id:"filterInput",placeholder:"Skriv for at søge..."},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1)],1),a("b-table",{attrs:{id:"HistoryTable",outlined:"",busy:e.isFetching,items:e.Items,fields:e.fields,filter:e.search,"show-empty":"","per-page":e.perPage,"current-page":e.currentPage,"sort-by":e.sortBy,"select-mode":"single"},on:{filtered:e.onFilter,"update:sortBy":function(t){e.sortBy=t},"update:sort-by":function(t){e.sortBy=t}},scopedSlots:e._u([{key:"head(button)",fn:function(){return[a("b-button",{on:{click:function(t){e.sortBy="",e.search=""}}},[e._v("Nulstil filter")])]},proxy:!0},{key:"table-busy",fn:function(){return[a("div",{staticClass:"text-center text-danger my-2"},[a("b-spinner",{staticClass:"align-middle"}),a("strong",[e._v("Loading...")])],1)]},proxy:!0},{key:"empty",fn:function(t){return[a("h4",[e._v("Vi kunne ikke finde nogen brugere der ikke er i en afdeling...")]),a("b-button",{on:{click:e.loadData}},[e._v("Refresh table")])]}},{key:"cell(image)",fn:function(e){return[a("b-img",{staticClass:"imgThumbnail",attrs:{src:e.item.loanItem.imageUri}})]}},{key:"cell(isReturned)",fn:function(t){return[t.item.isReturned?a("p",[e._v("Ja")]):a("p",[e._v("Nej")])]}},{key:"cell(button)",fn:function(t){return[a("b-button",{attrs:{variant:"primary"},on:{click:t.toggleDetails}},[e._v("mere")])]}},{key:"row-details",fn:function(t){return[a("b-card",[a("b-row",[a("b-col",{attrs:{lg:"2"}},[a("b-img",{attrs:{height:"120",src:t.item.loanItem.imageUri}})],1),a("b-col",{attrs:{lg:"3"}},[a("b-row",[a("b-col",[a("b",[e._v("Mærke:")]),e._v(" "+e._s(t.item.loanItem.brand)+" ")])],1),a("b-row",[a("b-col",[a("b",[e._v("Model:")]),e._v(" "+e._s(t.item.loanItem.model)+" ")])],1),a("b-row",[a("b-col",[a("b",[e._v("Kategori:")]),e._v(" "+e._s(t.item.loanItem.category)+" ")])],1),a("b-row",[a("b-col",[t.item.isReturned?a("div",[a("b",[e._v("Afleveret:")]),e._v(" Ja ")]):a("div",[a("b",[e._v("Afleveret:")]),e._v(" Nej ")])])],1)],1),a("b-col",[a("b-row",[a("b-col",[a("b",[e._v("Beskrivelse:")]),e._v(" "+e._s(t.item.loanItem.description)+" ")])],1),a("b-row",[a("b-col",[a("b",[e._v("Udlånt:")]),e._v(" "+e._s(t.item.loanDate)+" ")])],1),t.item.isReturned?a("b-row",[a("b-col",[a("b",[e._v("afleveret:")]),e._v(" "+e._s(t.item.returnDate)+" ")])],1):e._e()],1)],1)],1)]}}])}),e.totalRows>10?a("b-pagination",{attrs:{align:"center","total-rows":e.totalRows,"per-page":e.perPage,"aria-controls":"departmentTable"},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}}):e._e()],1)],1)},ze=[],qe={name:"LoanHistory",data:function(){return{fields:[{key:"user.username",label:"Brugernavn",sortable:!0},{key:"user.firstName",label:"Fornavn",sortable:!0},{key:"user.lastName",label:"Efternavn",sortable:!0},{key:"image",label:""},{key:"loanItem.brand",label:"Mærke",sortable:!0},{key:"loanItem.model",label:"Model"},{key:"loanItem.category",label:"Kategori",sortable:!0},{key:"isReturned",label:"Afleveret",sortable:!0},{key:"button",label:""}],isFetching:!0,search:"",currentPage:1,totalRows:0,perPage:10,sortBy:"",IsNotReturnedOnly:!1}},computed:{Items:function(){return this.$store.getters["LCF/GetItems"]},ItemAmount:function(){return this.$store.getters["LCF/GetItems"].length}},methods:{onFilter:function(e){this.totalRows=e.length,this.currentPage=1},loadData:function(){var e=this;this.isFetching=!0,this.$store.dispatch("LCF/GetLoanHistory").then((function(){console.log("Got some data, now lets show something in this component"),e.totalRows=e.ItemAmount,e.isFetching=!1,e.failedFetches=0})).catch((function(){console.log("no loans"),e.totalRows=0,e.failedFetches++,e.failedFetches<=5?j=setTimeout((function(){e.loadData()}),5e3):(e.isFetching=!1,e.failedFetches=0)}))},cancelFetch:function(){clearTimeout(j),this.failedFetches=0,this.isFetching=!1}},created:function(){this.loadData()}},Ge=qe,Ke=Object(d["a"])(Ge,Oe,ze,!1,null,null,null),Ve=Ke.exports,He=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-container",[a("b-row",[a("b-col",{staticClass:"my-1",attrs:{lg:"6"}},[a("b-button-group",{staticClass:"mt-1"},[a("b-button",{attrs:{disabled:e.isFetching},on:{click:e.loadData}},[e._v("Opdater tabel")]),a("b-button",{directives:[{name:"show",rawName:"v-show",value:e.isFetching,expression:"isFetching"}],on:{click:e.cancelFetch}},[e._v("Cancel")])],1)],1),a("b-col",{staticClass:"my-1",attrs:{lg:"6"}},[a("b-input-group",{attrs:{size:"sm"}},[a("b-form-input",{attrs:{type:"search",id:"filterInput",placeholder:"Skriv for at søge..."},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1)],1),a("b-table",{attrs:{id:"HistoryTable",outlined:"",busy:e.isFetching,items:e.Items,fields:e.fields,filter:e.search,"show-empty":"","per-page":e.perPage,"current-page":e.currentPage,"sort-by":e.sortBy,"select-mode":"single"},on:{filtered:e.onFilter,"update:sortBy":function(t){e.sortBy=t},"update:sort-by":function(t){e.sortBy=t}},scopedSlots:e._u([{key:"head(button)",fn:function(){return[a("b-button",{on:{click:function(t){e.sortBy="",e.search=""}}},[e._v("Nulstil filter")])]},proxy:!0},{key:"table-busy",fn:function(){return[a("div",{staticClass:"text-center text-danger my-2"},[a("b-spinner",{staticClass:"align-middle"}),a("strong",[e._v("Loading...")])],1)]},proxy:!0},{key:"empty",fn:function(t){return[a("h4",[e._v("Vi kunne ikke finde nogen brugere der ikke er i en afdeling...")]),a("b-button",{on:{click:e.loadData}},[e._v("Refresh table")])]}},{key:"cell(image)",fn:function(e){return[a("b-img",{staticClass:"imgThumbnail",attrs:{src:e.item.consumptionItem.imageUri}})]}},{key:"cell(button)",fn:function(t){return[a("b-button",{attrs:{variant:"primary"},on:{click:t.toggleDetails}},[e._v("mere")])]}},{key:"row-details",fn:function(t){return[a("b-card",[a("b-row",[a("b-col",{attrs:{lg:"2"}},[a("b-img",{attrs:{height:"120",src:t.item.consumptionItem.imageUri}})],1),a("b-col",{attrs:{lg:"3"}},[a("b-row",[a("b-col",[a("b",[e._v("Mærke:")]),e._v(" "+e._s(t.item.consumptionItem.brand)+" ")])],1),a("b-row",[a("b-col",[a("b",[e._v("Model:")]),e._v(" "+e._s(t.item.consumptionItem.model)+" ")])],1),a("b-row",[a("b-col",[a("b",[e._v("Kategori:")]),e._v(" "+e._s(t.item.consumptionItem.category)+" ")])],1),a("b-row",[a("b-col",[a("b",[e._v("Mængde:")]),e._v(" "+e._s(t.item.consumptionItem.amount)+" ")])],1)],1),a("b-col",[a("b-row",[a("b-col",[a("b",[e._v("Beskrivelse:")]),e._v(" "+e._s(t.item.consumptionItem.description)+" ")])],1),a("b-row",[a("b-col",[a("b",[e._v("Udlånt:")]),e._v(" "+e._s(t.item.consumptionDate)+" ")])],1)],1)],1)],1)]}}])}),e.totalRows>10?a("b-pagination",{attrs:{align:"center","total-rows":e.totalRows,"per-page":e.perPage,"aria-controls":"departmentTable"},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}}):e._e()],1)],1)},Ze=[],Je={name:"ConsumptionHistory",data:function(){return{fields:[{key:"user.username",label:"Brugernavn",sortable:!0},{key:"user.firstName",label:"Fornavn",sortable:!0},{key:"user.lastName",label:"Efternavn",sortable:!0},{key:"image",label:""},{key:"consumptionItem.brand",label:"Mærke",sortable:!0},{key:"consumptionItem.model",label:"Model"},{key:"consumptionItem.category",label:"Kategori",sortable:!0},{key:"consumptionItem.amount",label:"mængde",sortable:!0},{key:"button",label:""}],isFetching:!0,search:"",currentPage:1,totalRows:0,perPage:10,sortBy:"",IsNotReturnedOnly:!1}},computed:{Items:function(){return this.$store.getters["LCF/GetItems"]},ItemAmount:function(){return this.$store.getters["LCF/GetItems"].length}},methods:{onFilter:function(e){this.totalRows=e.length,this.currentPage=1},loadData:function(){var e=this;this.isFetching=!0,this.$store.dispatch("LCF/GetConsumptionHistory").then((function(){console.log("Got some data, now lets show something in this component"),e.totalRows=e.ItemAmount,e.isFetching=!1,e.failedFetches=0})).catch((function(){console.log("no loans"),e.totalRows=0,e.failedFetches++,e.failedFetches<=5?O=setTimeout((function(){e.loadData()}),5e3):(e.isFetching=!1,e.failedFetches=0)}))},cancelFetch:function(){clearTimeout(O),this.failedFetches=0,this.isFetching=!1}},created:function(){this.loadData()}},We=Je,Qe=Object(d["a"])(We,He,Ze,!1,null,null,null),Xe=Qe.exports,Ye=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-container",[a("div",[a("b-row",[a("b-col",{staticStyle:{"margin-top":"15px","margin-bottom":"15px"},attrs:{lg:"12"}},[a("b-button",{staticClass:"float-right",attrs:{variant:"primary"},on:{click:function(t){return e.updateCategory("add",{})}}},[e._v("Tilføj kategori")]),a("b-row",[a("b-col",{staticStyle:{"margin-bottom":"10px"},attrs:{lg:"8"}},[a("b-button",{attrs:{disabled:e.isFetching},on:{click:e.getCategories}},[e._v("Opdater tabel")]),a("b-button",{directives:[{name:"show",rawName:"v-show",value:e.isFetching,expression:"isFetching"}],on:{click:e.cancel}},[e._v("Cancel")])],1),a("b-col",{attrs:{lg:"4"}},[a("b-input-group",[a("b-form-input",{attrs:{type:"search",id:"filterInput",placeholder:"Skriv for at søge..."},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1)],1),a("div",{staticClass:"tablecontainer",staticStyle:{"text-align":"center"}},[a("b-table",{attrs:{id:"categoryTable",outlined:"",busy:e.isFetching,items:e.Items,fields:e.fields,filter:e.search,"show-empty":"","per-page":e.perPage,"current-page":e.currentPage,"primary-key":"name","sort-by":e.sortBy},on:{filtered:e.onFilter,"update:sortBy":function(t){e.sortBy=t},"update:sort-by":function(t){e.sortBy=t}},scopedSlots:e._u([{key:"head(button)",fn:function(){return[a("b-button",{staticStyle:{width:"100% margin-left:auto margin-right:auto"},on:{click:function(t){e.sortBy="",e.search=""}}},[e._v("Nulstil filter")])]},proxy:!0},{key:"table-busy",fn:function(){return[a("div",{staticClass:"text-center text-danger my-2"},[a("b-spinner",{staticClass:"align-middle"}),a("strong",[e._v("Loading...")])],1)]},proxy:!0},{key:"empty",fn:function(){return[a("h4",[e._v(e._s(e.notFoundMessage))]),a("b-button",{on:{click:e.getCategories}},[e._v("Refresh table")])]},proxy:!0},{key:"cell(button)",fn:function(t){return[a("div",[a("b-row",[a("b-col",{attrs:{lg:"6"}},[a("b-button",{attrs:{variant:"warning"},on:{click:function(a){return e.updateCategory("edit",t.item)}}},[e._v("Rediger")])],1),a("b-col",{attrs:{lg:"6"}},[a("b-button",{attrs:{variant:"danger"},on:{click:function(a){return e.updateCategory("delete",t.item)}}},[e._v("Slet")])],1)],1)],1)]}}])})],1),a("b-pagination",{attrs:{align:"center","total-rows":e.totalRows,"per-page":e.perPage,"aria-controls":"categoryTable"},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1)],1)],1),a("b-modal",{attrs:{id:"updateCategory","cancel-title":"Annuller","no-close-on-backdrop":"",size:"lg",title:e.updateCategoryModalTitle},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("b-button",{staticClass:"float-right",on:{click:e.closeModal}},[e._v("Annuller")]),"add"==e.activeModal?a("b-button",{staticClass:"float-right",staticStyle:{"margin-left":"10px"},attrs:{variant:"success"},on:{click:e.addCategory}},[e._v("Gem")]):e._e(),"edit"==e.activeModal?a("b-button",{staticClass:"float-right",staticStyle:{"margin-left":"10px"},attrs:{variant:"success"},on:{click:e.editCategory}},[e._v("Gem")]):e._e(),"delete"==e.activeModal?a("b-button",{staticClass:"float-right",staticStyle:{"margin-left":"10px"},attrs:{variant:"danger"},on:{click:e.deleteCategory}},[e._v("Ja")]):e._e()]},proxy:!0}]),model:{value:e.showUpdateCategoryModal,callback:function(t){e.showUpdateCategoryModal=t},expression:"showUpdateCategoryModal"}},["delete"!=e.activeModal?a("b-form",[a("b-row",[a("b-col",{staticStyle:{"margin-bottom":"15px"},attrs:{lg:"12"}},[a("label",[e._v("Kategorinavn")]),"add"==e.activeModal?a("b-form-input",{attrs:{type:"text",required:"",placeholder:"Kategorinavn..."},model:{value:e.categoryName,callback:function(t){e.categoryName=t},expression:"categoryName"}}):e._e(),"edit"==e.activeModal?a("b-form-input",{attrs:{type:"text",required:"",placeholder:"Kategorinavn..."},model:{value:e.selectedCategory.categoryName,callback:function(t){e.$set(e.selectedCategory,"categoryName",t)},expression:"selectedCategory.categoryName"}}):e._e()],1)],1)],1):e._e(),"delete"==e.activeModal?a("b-row",[a("b-col",{attrs:{lg:"12"}},[a("p",{staticStyle:{"font-size":"20px"}},[e._v("Er du sikker på at du vil slette "+e._s(e.selectedCategory.categoryName)+" fra listen over kategorier?")])])],1):e._e()],1)],1)},et=[],tt={name:"CategoryManagement",mixins:[Ce.a],data:function(){return{categoryName:"",selectedCategory:{},updateCategoryModalTitle:"",showUpdateCategoryModal:!1,fields:[{key:"categoryName",label:"Navn"},{key:"button",label:""}],isFetching:!0,failedFetches:0,search:"",currentPage:1,totalRows:0,perPage:10,sortBy:"",activeModal:"",Items:Array,notFoundMessage:""}},computed:{Categories:function(){return this.$store.getters["categoryManagement/getCategories"]},CategoriesAmount:function(){return this.$store.getters["categoryManagement/getCategories"].length}},methods:{getCategories:function(){var e=this;this.isFetching=!0,this.$store.dispatch("categoryManagement/getCategories").then((function(){console.log("Got some data, now lets show something in this component"),e.totalRows=e.CategoriesAmount,e.Items=e.Categories,e.isFetching=!1,e.failedFetches=0})).catch((function(){console.log("no items found"),e.Items=[],e.totalRows=0,e.failedFetches++,e.failedFetches<=5?z=setTimeout((function(){e.getItems()}),5e3):(e.isFetching=!1,e.failedFetches=0,e.notFoundMessage="Der blev ikke fundet nogen ting i lageret...")}))},updateCategory:function(e,t){"add"==e?(this.updateCategoryModalTitle="Tilføj Kategori",this.activeModal="add"):"edit"==e?(this.updateCategoryModalTitle="Rediger Kategori",this.activeModal="edit",Object.assign(this.selectedCategory,t)):(this.updateCategoryModalTitle="Slet Kategori",this.activeModal="delete",this.selectedCategory=t),this.showUpdateCategoryModal=!0},addCategory:function(){var e=this;this.$store.dispatch("categoryManagement/addCategory",{categoryName:this.categoryName}).then((function(){e.categoryName="",e.showUpdateCategoryModal=!1,e.getCategories()})).catch((function(e){alert(e)}))},fillEditCategoryModal:function(e){Object.assign(this.selectedCategory,e),this.updateCategory("edit")},editCategory:function(){var e=this;this.$store.dispatch("categoryManagement/editCategory",{categoryId:this.selectedCategory.categoryId,categoryName:this.selectedCategory.categoryName}).then((function(){e.getCategories(),e.showUpdateCategoryModal=!1})).catch((function(t){alert(t),e.getCategories(),e.showUpdateCategoryModal=!1}))},deleteCategory:function(){var e=this;this.$store.dispatch("categoryManagement/deleteCategory",{categoryId:this.selectedCategory.categoryId}).then((function(){e.totalRows--,e.selectedCategory={},e.showUpdateCategoryModal=!1})).catch((function(t){alert(t),e.getCategories(),e.showUpdateCategoryModal=!1}))},closeModal:function(){this.categoryName="",this.selectedCategory={},this.activeModal="",this.showUpdateCategoryModal=!1},cancel:function(){clearTimeout(z),this.failedFetches=0,this.isFetching=!1},onFilter:function(e){this.totalRows=e.length,this.currentPage=1}},created:function(){this.getCategories()},mounted:function(){this.$smoothReflow({el:"#categoryTable"}),this.$smoothReflow({el:".tablecontainer"})}},at=tt,ot=Object(d["a"])(at,Ye,et,!1,null,null,null),nt=ot.exports,st=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-container",[a("div",[a("b-row",[a("b-col",{staticStyle:{"margin-top":"15px","margin-bottom":"15px"},attrs:{lg:"12"}},[a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.addItemModal",modifiers:{addItemModal:!0}}],staticClass:"float-right",attrs:{variant:"primary"}},[e._v("Tilføj ting til lager")]),a("b-row",[a("b-col",{staticStyle:{"margin-bottom":"10px"},attrs:{lg:"8"}},[a("b-button",{attrs:{disabled:e.isFetching},on:{click:e.getItems}},[e._v("Opdater tabel")]),a("b-button",{directives:[{name:"show",rawName:"v-show",value:e.isFetching,expression:"isFetching"}],on:{click:e.cancel}},[e._v("Cancel")])],1),a("b-col",{attrs:{lg:"4"}},[a("b-input-group",[a("b-form-input",{attrs:{type:"search",id:"filterInput",placeholder:"Skriv for at søge..."},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1)],1),a("div",{staticClass:"tablecontainer",staticStyle:{"text-align":"center"}},[a("b-table",{attrs:{id:"inventoryTable",outlined:"",busy:e.isFetching,items:e.Items,fields:e.fields,filter:e.search,"show-empty":"","per-page":e.perPage,"current-page":e.currentPage,"primary-key":"name","sort-by":e.sortBy},on:{filtered:e.onFilter,"update:sortBy":function(t){e.sortBy=t},"update:sort-by":function(t){e.sortBy=t}},scopedSlots:e._u([{key:"head(button)",fn:function(){return[a("b-button",{staticStyle:{width:"100% margin-left:auto margin-right:auto"},on:{click:function(t){e.sortBy="",e.search=""}}},[e._v("Nulstil filter")])]},proxy:!0},{key:"table-busy",fn:function(){return[a("div",{staticClass:"text-center text-danger my-2"},[a("b-spinner",{staticClass:"align-middle"}),a("strong",[e._v("Loading...")])],1)]},proxy:!0},{key:"empty",fn:function(){return[a("h4",[e._v(e._s(e.notFoundMessage))]),a("b-button",{on:{click:e.getItems}},[e._v("Refresh table")])]},proxy:!0},{key:"cell(image)",fn:function(e){return[a("b-img",{staticClass:"imgThumbnail",attrs:{src:e.item.image.imageUri}})]}},{key:"cell(amountLeft)",fn:function(t){return[t.item.amountLeft/t.item.barcodes.length*100>25?a("p",[e._v(e._s(t.item.amountLeft)+"/"+e._s(t.item.barcodes.length))]):e._e(),t.item.amountLeft/t.item.barcodes.length*100<=25&&t.item.amountLeft/t.item.barcodes.length*100>10?a("p",{staticStyle:{}},[e._v(e._s(t.item.amountLeft)+"/"+e._s(t.item.barcodes.length))]):e._e(),t.item.amountLeft/t.item.barcodes.length*100<=10?a("p",{staticStyle:{color:"red"}},[e._v(e._s(t.item.amountLeft)+"/"+e._s(t.item.barcodes.length))]):e._e()]}},{key:"cell(button)",fn:function(t){return[a("div",[a("b-row",[a("b-col",{attrs:{lg:"3"}},[a("b-button",{attrs:{variant:"primary"},on:{click:function(a){return e.selectedItemModal(t.item,"About")}}},[e._v("Mere")])],1),a("b-col",{attrs:{lg:"3"}},[a("b-button",{attrs:{variant:"warning"},on:{click:function(a){return e.fillEditItemModal(t.item)}}},[e._v("Rediger")])],1),a("b-col",{attrs:{lg:"3"}},[a("b-button",{attrs:{variant:"warning"},on:{click:function(a){return e.addBarcodeToItem(t.item)}}},[e._v("Stregkoder")])],1),a("b-col",{attrs:{lg:"3"}},[a("b-button",{attrs:{variant:"danger",disabled:0==t.item.barcodes.length},on:{click:function(a){return e.selectedItemModal(t.item,"Delete")}}},[e._v("Slet")])],1)],1)],1)]}}])})],1),a("b-pagination",{attrs:{align:"center","total-rows":e.totalRows,"per-page":e.perPage,"aria-controls":"inventoryTable"},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1)],1)],1),a("b-modal",{attrs:{id:"addItemModal","cancel-title":"Annuller","no-close-on-backdrop":"",size:"lg",title:"Tilføj ting til lager"},on:{cancel:e.closeModal,ok:e.addItem},model:{value:e.showAddItemModal,callback:function(t){e.showAddItemModal=t},expression:"showAddItemModal"}},[a("b-form",[a("b-row",[a("b-col",{staticStyle:{"margin-bottom":"15px"},attrs:{lg:"6"}},[a("label",[e._v("Mærke")]),a("b-form-input",{attrs:{type:"text",required:"",placeholder:"Mærke"},model:{value:e.itemBrand,callback:function(t){e.itemBrand=t},expression:"itemBrand"}})],1),a("b-col",{attrs:{lg:"6"}},[a("label",[e._v("Model")]),a("b-form-input",{attrs:{type:"text",required:"",placeholder:"Model"},model:{value:e.itemModel,callback:function(t){e.itemModel=t},expression:"itemModel"}})],1),a("b-col",{staticStyle:{"margin-bottom":"15px"},attrs:{lg:"6"}},[a("label",[e._v("Beskrivelse")]),a("b-form-input",{attrs:{type:"text",placeholder:"Beskrivelse"},model:{value:e.itemDescription,callback:function(t){e.itemDescription=t},expression:"itemDescription"}})],1),a("b-col",{attrs:{lg:"6"}},[a("label",[e._v("Kategori")]),a("b-form-select",{attrs:{options:e.Categories,"value-field":"id","text-field":"value"},model:{value:e.dropdownSelected,callback:function(t){e.dropdownSelected=t},expression:"dropdownSelected"}})],1),a("b-col",{attrs:{lg:"4"}},[a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.selectImageModal",modifiers:{selectImageModal:!0}}],staticStyle:{width:"130px"}},[e._v("Vælg billede")]),a("br"),a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.UploadImageModal",modifiers:{UploadImageModal:!0}}],staticStyle:{width:"130px","margin-top":"15px"}},[e._v("Upload billede")])],1),a("b-col",{attrs:{lg:"2"}},[a("b-img",{staticStyle:{height:"105px"},attrs:{fluid:"",src:e.SelectedImage.imageUri}})],1)],1)],1)],1),a("b-modal",{attrs:{id:"MoreAboutItem","cancel-title":"Annuller","ok-only":"","no-close-on-backdrop":"",size:"lg",title:e.selectedItemModalTitle},on:{close:e.closeModal,ok:e.closeModal},model:{value:e.showMoreAboutItem,callback:function(t){e.showMoreAboutItem=t},expression:"showMoreAboutItem"}},[a("b-form",[a("b-row",[a("b-col",{staticStyle:{"margin-bottom":"15px"},attrs:{lg:"6"}},[a("label",{staticStyle:{"font-weight":"bold"}},[e._v("Mærke")]),a("br"),a("label",[e._v(e._s(e.SelectedItem.brand))])]),a("b-col",{attrs:{lg:"6"}},[a("label",{staticStyle:{"font-weight":"bold"}},[e._v("Model")]),a("br"),a("label",[e._v(e._s(e.SelectedItem.model))])]),a("b-col",{staticStyle:{"margin-bottom":"15px"},attrs:{lg:"6"}},[a("label",{staticStyle:{"font-weight":"bold"}},[e._v("Beskrivelse")]),a("br"),a("label",[e._v(e._s(e.SelectedItem.description))])]),a("b-col",{attrs:{lg:"6"}},[a("label",{staticStyle:{"font-weight":"bold"}},[e._v("Kategori")]),a("br"),a("label",[e._v(e._s(e.SelectedItem.category.categoryName))])]),a("b-col",{attrs:{lg:"2"}},[a("b-img",{staticStyle:{height:"105px"},attrs:{fluid:"",src:e.SelectedImage.imageUri}})],1)],1)],1)],1),a("b-modal",{attrs:{id:"editItemModal",size:"lg",title:e.SelectedItem.itemBrand,"no-close-on-backdrop":""},on:{ok:e.editItem},model:{value:e.showEditItemModal,callback:function(t){e.showEditItemModal=t},expression:"showEditItemModal"}},[a("b-form",[a("b-row",[a("b-col",{staticStyle:{"margin-bottom":"15px"},attrs:{lg:"6"}},[a("label",[e._v("Mærke")]),a("b-form-input",{attrs:{type:"text",required:"",placeholder:"Mærke"},model:{value:e.SelectedItem.brand,callback:function(t){e.$set(e.SelectedItem,"brand",t)},expression:"SelectedItem.brand"}})],1),a("b-col",{attrs:{lg:"6"}},[a("label",[e._v("Model")]),a("b-form-input",{attrs:{type:"text",required:"",placeholder:"Model"},model:{value:e.SelectedItem.model,callback:function(t){e.$set(e.SelectedItem,"model",t)},expression:"SelectedItem.model"}})],1),a("b-col",{staticStyle:{"margin-bottom":"15px"},attrs:{lg:"6"}},[a("label",[e._v("Beskrivelse")]),a("b-form-input",{attrs:{type:"text",placeholder:"Beskrivelse"},model:{value:e.SelectedItem.description,callback:function(t){e.$set(e.SelectedItem,"description",t)},expression:"SelectedItem.description"}})],1),a("b-col",{attrs:{lg:"6"}},[a("label",[e._v("Stregkode")]),a("b-form-input",{attrs:{type:"text",required:"",placeholder:"Stregkode"},model:{value:e.SelectedItem.barcode,callback:function(t){e.$set(e.SelectedItem,"barcode",t)},expression:"SelectedItem.barcode"}})],1),a("b-col",{attrs:{lg:"4"}},[a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.selectImageModal",modifiers:{selectImageModal:!0}}],staticStyle:{width:"130px"}},[e._v("Vælg billede")]),a("br"),a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.UploadImageModal",modifiers:{UploadImageModal:!0}}],staticStyle:{width:"130px","margin-top":"15px"}},[e._v("Upload billede")])],1),a("b-col",{attrs:{lg:"2"}},[e.showEditItemModal?a("b-img",{staticStyle:{height:"105px"},attrs:{fluid:"",src:e.SelectedImage.imageUri}}):a("b-img",{attrs:{fluid:"",src:"https://inventoryimagestorage.blob.core.windows.net/public-images/ImagePlaceholder.png"}})],1),a("b-col",{attrs:{lg:"6"}},[a("label",[e._v("Kategori")]),a("b-form-select",{attrs:{options:e.Categories,"value-field":"id","text-field":"value"},model:{value:e.dropdownSelected,callback:function(t){e.dropdownSelected=t},expression:"dropdownSelected"}})],1)],1)],1)],1),a("b-modal",{attrs:{id:"deleteSelectedItemModal",size:"lg","no-close-on-backdrop":"",title:e.selectedItemModalTitle},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("b-button",{staticClass:"float-right",on:{click:function(t){e.showDeleteSelectedItemModal=!1}}},[e._v("Annuller")]),a("b-button",{staticClass:"float-right",staticStyle:{"margin-left":"10px"},attrs:{variant:"danger"},on:{click:e.deleteItem}},[e._v("Ja")])]},proxy:!0}]),model:{value:e.showDeleteSelectedItemModal,callback:function(t){e.showDeleteSelectedItemModal=t},expression:"showDeleteSelectedItemModal"}},[a("b-row",[a("b-col",{attrs:{lg:"12"}},[a("p",{staticStyle:{"font-size":"20px"}},[e._v("Er du sikker på at du vil fjerne "+e._s(e.SelectedItem.brand)+" "+e._s(e.SelectedItem.model)+" fra lageret?")])])],1)],1),a("b-modal",{attrs:{id:"selectImageModal",size:"lg",title:"Vælg billede","no-close-on-backdrop":"",scrollable:"","ok-only":""},scopedSlots:e._u([{key:"modal-header",fn:function(){return[a("b-row",{staticStyle:{width:"100%"}},[a("b-col",{attrs:{lg:"3"}},[a("h5",[e._v("Vælg billede")])]),a("b-col",{attrs:{lg:"9"}},[a("b-form-input",{attrs:{type:"search",placeholder:"Skriv for at søge..."},model:{value:e.imageSearch,callback:function(t){e.imageSearch=t},expression:"imageSearch"}})],1)],1)]},proxy:!0},{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("p",{staticClass:"float-left"},[e._v("Valgt billede navn: "+e._s(e.SelectedImage.imageName))]),a("b-button",{staticClass:"float-right",staticStyle:{"margin-left":"10px"},attrs:{variant:"primary"},on:{click:e.okSelectImageModal}},[e._v("Ok")]),a("b-button",{staticClass:"float-right",staticStyle:{"margin-left":"10px"},on:{click:e.closeSelectImageModal}},[e._v("Annuller")])],1)]},proxy:!0}]),model:{value:e.showSelectImageModal,callback:function(t){e.showSelectImageModal=t},expression:"showSelectImageModal"}},[a("b-form-group",[a("b-row",e._l(e.SearchedImages,(function(t){return a("b-col",{key:t.imageId,attrs:{lg:"3"}},[a("b-form-radio",{staticClass:"item-select",class:{"item-select-active":e.selectedImage==t},attrs:{value:t},model:{value:e.selectedImage,callback:function(t){e.selectedImage=t},expression:"selectedImage"}},[a("label",{staticClass:"imageSize"},[e._v(e._s(t.imageName))]),a("b-img",{staticClass:"img-hover",staticStyle:{"max-height":"105px","max-width":"105px"},attrs:{src:t.imageUri}})],1)],1)})),1)],1)],1),a("b-modal",{attrs:{id:"UploadImageModal",size:"xl",title:"Upload billede"},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("b-button",{staticClass:"float-right",staticStyle:{"margin-left":"10px"},attrs:{variant:"primary"},on:{click:e.uploadImage}},[e._v("Ok")]),a("b-button",{staticClass:"float-right",on:{click:e.closeModal}},[e._v("Annuller")])],1)]},proxy:!0}]),model:{value:e.showUploadImageModal,callback:function(t){e.showUploadImageModal=t},expression:"showUploadImageModal"}},[a("b-form-group",[a("b-row",[a("b-col",{staticStyle:{"margin-bottom":"30px"},attrs:{lg:"12"}},[a("label",[e._v("Navn")]),a("b-form-input",{attrs:{state:e.NoImageName,type:"text",required:"",placeholder:"Navn"},model:{value:e.uploadImageName,callback:function(t){e.uploadImageName=t},expression:"uploadImageName"}}),a("b-form-invalid-feedback",{attrs:{state:e.NoImageName}},[e._v("Husk at give billedet et navn")])],1),a("b-col",{attrs:{lg:"12"}},[a("div",{staticClass:"file-upload",class:e.imageUploadBorder},[e.isUploaded?a("b-img",{staticStyle:{height:"inherit"},attrs:{src:e.uploadedImageURL}}):a("div",{ref:"uploadedImageText",staticClass:"file-upload-text"},[a("b-img",{staticClass:"fileUploadImg",attrs:{src:"https://inventoryimagestorage.blob.core.windows.net/public-images/FileUpload.png"}}),e._v("Vælg et billede... ")],1),a("input",{ref:"uploadedImage",attrs:{type:"file",id:"uploadedImage"},on:{change:function(t){return e.handleFileUpload()}}})],1)])],1)],1)],1),a("addBarcodeToItemModal",{attrs:{item:e.selectedItem},on:{updateItemBarcodes:e.getItems},model:{value:e.showAddBarcodeToItem,callback:function(t){e.showAddBarcodeToItem=t},expression:"showAddBarcodeToItem"}})],1)},rt=[],it=(a("a4d3"),a("e01a"),a("3ca3"),a("ddb0"),a("2b3d"),{name:"LoanInventoryManagement",mixins:[Ce.a],data:function(){return{itemBrand:"",itemModel:"",itemDescription:"",itemBarcode:"",itemAmount:"",dropdownSelected:null,requestURL:"",modalTitle:"",addItemsBtn:"",inventoryManagement:!1,imageUploadBorder:"fileBorder",imageSearch:"",selectedImage:null,uploadImageName:"",uploadedImage:"",isUploaded:!1,uploadedImageURL:"",selectedItem:{},updateAmountLeft:0,selectedItemModalTitle:"",showMoreAboutItem:!1,showAddItemModal:!1,showAddBarcodeToItem:!1,showEditItemModal:!1,showSelectImageModal:!1,showUploadImageModal:!1,showDeleteSelectedItemModal:!1,fields:[{key:"image",label:""},{key:"brand",label:"Mærke",sortable:!0},{key:"model",label:"Model",sortable:!0},{key:"category.categoryName",label:"Kategori",sortable:!0},{key:"amountLeft",label:"Mængde",sortable:!0},{key:"button",label:""}],isFetching:!0,failedFetches:0,search:"",currentPage:1,totalRows:0,perPage:10,sortBy:"",activeModal:"",Items:Array,notFoundMessage:""}},watch:{},computed:{NoImageName:function(){return""!=this.uploadImageName},LoanItems:function(){return this.$store.getters["inventoryManagement/getItems"]},LoanItemAmount:function(){return this.$store.getters["inventoryManagement/getItems"].length},Images:function(){return this.$store.getters["inventoryManagement/getImages"]},Categories:function(){return this.$store.getters["inventoryManagement/getCategories"]},SelectedItem:{cache:!1,get:function(){return 0===Object.entries(this.selectedItem).length?{inventory:{inventoryType:""},category:{categoryName:""},image:{imageUri:""}}:this.selectedItem}},SelectedImage:function(){return null!=this.selectedImage?this.selectedImage:{imageId:0,imageName:"Intet billede valgt",imageUri:"https://inventoryimagestorage.blob.core.windows.net/public-images/ImagePlaceholder.png"}},SearchedImages:function(){if(""==this.imageSearch)return this.Images;for(var e=[],t=0;t<this.Images.length;t++)this.Images[t].imageName.toLowerCase().includes(this.imageSearch.toLowerCase())&&e.push(this.Images[t]);return e}},methods:{ShowTable:function(){this.getCategories(),this.getImages(),this.getItems()},getCategories:function(){var e=this;this.$store.dispatch("inventoryManagement/getCategories").then((function(){console.log("Got some data, now lets show something in this component"),e.failedFetches=0})).catch((function(){console.log("no categories found"),e.totalRows=0,e.failedFetches++,e.failedFetches<=5?q=setTimeout((function(){e.getCategories()}),5e3):(e.failedFetches=0,e.notFoundMessage="Der blev ikke fundet nogen kategorier...")}))},getImages:function(){var e=this;this.$store.dispatch("inventoryManagement/getImages").then((function(){console.log("Got some data, now lets show something in this component"),e.failedFetches=0})).catch((function(){console.log("no images found"),e.totalRows=0,e.failedFetches++,e.failedFetches<=5?q=setTimeout((function(){e.getImages()}),5e3):(e.failedFetches=0,e.notFoundMessage="Der blev ikke fundet nogen billeder...")}))},uploadImage:function(){var e=this,t=new FormData;t.append("file",this.uploadedImage),t.append("imageName",this.uploadImageName),""!=this.uploadImageName&&this.$store.dispatch("inventoryManagement/uploadImage",t).then((function(t){e.selectedImage=t,console.log("SUCCESS!!"),e.showUploadImageModal=!1})).catch((function(e){console.log(e)}))},handleFileUpload:function(){this.imageUploadBorder="",this.uploadedImage=this.$refs.uploadedImage.files[0],this.uploadedImageURL=URL.createObjectURL(this.uploadedImage),this.isUploaded=!0},okSelectImageModal:function(){null!=this.selectedImage?this.showSelectImageModal=!1:alert("Error")},closeSelectImageModal:function(){this.selectedImage=null,this.showSelectImageModal=!1},getItems:function(){var e=this;this.isFetching=!0,this.$store.dispatch("inventoryManagement/getLoanItems",1).then((function(){console.log("Got some data, now lets show something in this component"),e.totalRows=e.LoanItemAmount,e.Items=e.LoanItems,e.isFetching=!1,e.failedFetches=0})).catch((function(){console.log("no items found"),e.Items=[],e.totalRows=0,e.failedFetches++,e.failedFetches<=5?q=setTimeout((function(){e.getItems()}),5e3):(e.isFetching=!1,e.failedFetches=0,e.notFoundMessage="Der blev ikke fundet nogen ting i lageret...")})),this.modalTitle="Tilføj ting til lager",this.addItemsBtn="Tilføj ting til lager",this.inventoryManagement=!1},addItem:function(){var e=this;this.$store.dispatch("inventoryManagement/addLoanItem",{inventoryId:1,brand:this.itemBrand,model:this.itemModel,description:this.itemDescription,categoryId:this.dropdownSelected,imageId:this.SelectedImage.imageId}).then((function(){e.itemBrand="",e.itemModel="",e.itemDescription="",e.selectedImage=null,e.getItems()})).catch((function(e){alert(e)}))},addBarcodeToItem:function(e){Object.assign(this.selectedItem,e),this.showAddBarcodeToItem=!0},fillEditItemModal:function(e){Object.assign(this.selectedItem,e),this.dropdownSelected=e.category.categoryID,this.showEditItemModal=!0},editItem:function(){var e=this;this.$store.dispatch("inventoryManagement/editLoanItem",{itemId:this.selectedItem.itemId,inventoryId:1,brand:this.selectedItem.brand,model:this.selectedItem.model,description:this.selectedItem.description,categoryId:this.dropdownSelected,imageId:this.selectedItem.image.imageId}).then((function(){e.getItems(),e.showEditItemModal=!1})).catch((function(t){e.getItems(),alert(t)}))},selectedItemModal:function(e,t){this.selectedItemModalTitle=e.brand+" - "+e.model,Object.assign(this.selectedItem,e),this.selectedImage=this.selectedItem.image,this.dropdownSelected=e.category.categoryID,"About"==t&&(this.showMoreAboutItem=!0),"Delete"==t&&(this.showDeleteSelectedItemModal=!0)},deleteItem:function(){var e=this;this.$store.dispatch("inventoryManagement/deleteLoanItem",{itemId:this.selectedItem.itemId,inventoryId:1}).then((function(){e.totalRows--})),this.selectedItem={},this.showDeleteSelectedItemModal=!1},closeModal:function(){var e=this;this.dropdownSelected=null,this.itemBrand="",this.itemModel="",this.itemDescription="",this.itemBarcode="",this.showUploadImageModal=!1,this.uploadImageName="",this.uploadedImageURL="",this.imageUploadBorder="fileBorder",this.isUploaded=!1,q=setTimeout((function(){e.selectedImage=null}),250)},cancel:function(){clearTimeout(q),this.failedFetches=0,this.isFetching=!1},onFilter:function(e){this.totalRows=e.length,this.currentPage=1}},created:function(){this.ShowTable()},mounted:function(){this.$smoothReflow({el:"#inventoryTable"}),this.$smoothReflow({el:".tablecontainer"})}}),lt=it,ct=Object(d["a"])(lt,st,rt,!1,null,null,null),dt=ct.exports,mt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-container",[a("div",[a("b-row",[a("b-col",{staticStyle:{"margin-top":"15px","margin-bottom":"15px"},attrs:{lg:"12"}},[a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.addItemModal",modifiers:{addItemModal:!0}}],staticClass:"float-right",attrs:{variant:"primary"}},[e._v("Tilføj ting til lager")]),a("b-row",[a("b-col",{staticStyle:{"margin-bottom":"10px"},attrs:{lg:"8"}},[a("b-button",{attrs:{disabled:e.isFetching},on:{click:e.getItems}},[e._v("Opdater tabel")]),a("b-button",{directives:[{name:"show",rawName:"v-show",value:e.isFetching,expression:"isFetching"}],on:{click:e.cancel}},[e._v("Cancel")])],1),a("b-col",{attrs:{lg:"4"}},[a("b-input-group",[a("b-form-input",{attrs:{type:"search",id:"filterInput",placeholder:"Skriv for at søge..."},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1)],1),a("div",{staticClass:"tablecontainer",staticStyle:{"text-align":"center"}},[a("b-table",{attrs:{id:"inventoryTable",outlined:"",busy:e.isFetching,items:e.Items,fields:e.fields,filter:e.search,"show-empty":"","per-page":e.perPage,"current-page":e.currentPage,"primary-key":"name","sort-by":e.sortBy},on:{filtered:e.onFilter,"update:sortBy":function(t){e.sortBy=t},"update:sort-by":function(t){e.sortBy=t}},scopedSlots:e._u([{key:"head(button)",fn:function(){return[a("b-button",{staticStyle:{width:"100% margin-left:auto margin-right:auto"},on:{click:function(t){e.sortBy="",e.search=""}}},[e._v("Nulstil filter")])]},proxy:!0},{key:"table-busy",fn:function(){return[a("div",{staticClass:"text-center text-danger my-2"},[a("b-spinner",{staticClass:"align-middle"}),a("strong",[e._v("Loading...")])],1)]},proxy:!0},{key:"empty",fn:function(){return[a("h4",[e._v(e._s(e.notFoundMessage))]),a("b-button",{on:{click:e.getItems}},[e._v("Refresh table")])]},proxy:!0},{key:"cell(image)",fn:function(e){return[a("b-img",{staticClass:"imgThumbnail",attrs:{src:e.item.image.imageUri}})]}},{key:"cell(amountLeft)",fn:function(t){return[t.item.amountLeft>25?a("p",[e._v(e._s(t.item.amountLeft))]):e._e(),t.item.amountLeft<26&&t.item.amountLeft>5?a("p",{staticStyle:{color:"darkOrange"}},[e._v(e._s(t.item.amountLeft))]):e._e(),t.item.amountLeft<6?a("p",{staticStyle:{color:"red"}},[e._v(e._s(t.item.amountLeft))]):e._e()]}},{key:"cell(button)",fn:function(t){return[a("div",[a("b-row",[a("b-col",{attrs:{lg:"3"}},[a("b-button",{attrs:{variant:"primary"},on:{click:function(a){return e.selectedItemModal(t.item,"About")}}},[e._v("Mere")])],1),a("b-col",{attrs:{lg:"3"}},[a("b-button",{attrs:{variant:"warning"},on:{click:function(a){return e.fillEditItemModal(t.item)}}},[e._v("Rediger")])],1),a("b-col",{attrs:{lg:"3"}},[a("b-button",{attrs:{variant:"warning"},on:{click:function(a){return e.addBarcodeToItem(t.item)}}},[e._v("Stregkoder")])],1),a("b-col",{attrs:{lg:"3"}},[a("b-button",{attrs:{variant:"danger",disabled:0==t.item.barcodes.length},on:{click:function(a){return e.selectedItemModal(t.item,"Delete")}}},[e._v("Slet")])],1)],1)],1)]}}])})],1),a("b-pagination",{attrs:{align:"center","total-rows":e.totalRows,"per-page":e.perPage,"aria-controls":"inventoryTable"},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1)],1)],1),a("b-modal",{attrs:{id:"addItemModal","cancel-title":"Annuller","no-close-on-backdrop":"",size:"lg",title:"Tilføj ting til lager"},on:{cancel:e.closeModal,ok:e.addItem},model:{value:e.showAddItemModal,callback:function(t){e.showAddItemModal=t},expression:"showAddItemModal"}},[a("b-form",[a("b-row",[a("b-col",{staticStyle:{"margin-bottom":"15px"},attrs:{lg:"6"}},[a("label",[e._v("Mærke")]),a("b-form-input",{attrs:{type:"text",required:"",placeholder:"Mærke"},model:{value:e.itemBrand,callback:function(t){e.itemBrand=t},expression:"itemBrand"}})],1),a("b-col",{attrs:{lg:"6"}},[a("label",[e._v("Model")]),a("b-form-input",{attrs:{type:"text",required:"",placeholder:"Model"},model:{value:e.itemModel,callback:function(t){e.itemModel=t},expression:"itemModel"}})],1),a("b-col",{staticStyle:{"margin-bottom":"15px"},attrs:{lg:"6"}},[a("label",[e._v("Beskrivelse")]),a("b-form-input",{attrs:{type:"text",placeholder:"Beskrivelse"},model:{value:e.itemDescription,callback:function(t){e.itemDescription=t},expression:"itemDescription"}})],1),a("b-col",{attrs:{lg:"6"}},[a("label",[e._v("Kategori")]),a("b-form-select",{attrs:{options:e.Categories,"value-field":"id","text-field":"value"},model:{value:e.dropdownSelected,callback:function(t){e.dropdownSelected=t},expression:"dropdownSelected"}})],1),a("b-col",{attrs:{lg:"4"}},[a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.selectImageModal",modifiers:{selectImageModal:!0}}],staticStyle:{width:"130px"}},[e._v("Vælg billede")]),a("br"),a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.UploadImageModal",modifiers:{UploadImageModal:!0}}],staticStyle:{width:"130px","margin-top":"15px"}},[e._v("Upload billede")])],1),a("b-col",{attrs:{lg:"2"}},[a("b-img",{staticStyle:{height:"105px"},attrs:{fluid:"",src:e.SelectedImage.imageUri}})],1)],1)],1)],1),a("b-modal",{attrs:{id:"MoreAboutItem","cancel-title":"Annuller","ok-only":"","no-close-on-backdrop":"",size:"lg",title:e.selectedItemModalTitle},on:{close:e.closeModal,ok:e.closeModal},model:{value:e.showMoreAboutItem,callback:function(t){e.showMoreAboutItem=t},expression:"showMoreAboutItem"}},[a("b-form",[a("b-row",[a("b-col",{staticStyle:{"margin-bottom":"15px"},attrs:{lg:"6"}},[a("label",{staticStyle:{"font-weight":"bold"}},[e._v("Mærke")]),a("br"),a("label",[e._v(e._s(e.SelectedItem.brand))])]),a("b-col",{attrs:{lg:"6"}},[a("label",{staticStyle:{"font-weight":"bold"}},[e._v("Model")]),a("br"),a("label",[e._v(e._s(e.SelectedItem.model))])]),a("b-col",{staticStyle:{"margin-bottom":"15px"},attrs:{lg:"6"}},[a("label",{staticStyle:{"font-weight":"bold"}},[e._v("Beskrivelse")]),a("br"),a("label",[e._v(e._s(e.SelectedItem.description))])]),a("b-col",{attrs:{lg:"6"}},[a("label",{staticStyle:{"font-weight":"bold"}},[e._v("Kategori")]),a("br"),a("label",[e._v(e._s(e.SelectedItem.category.categoryName))])]),a("b-col",{attrs:{lg:"2"}},[a("b-img",{staticStyle:{height:"105px"},attrs:{fluid:"",src:e.SelectedImage.imageUri}})],1),a("b-col",{attrs:{lang:"4"}}),a("b-col",{attrs:{lg:"6"}},[a("label",{staticStyle:{"font-weight":"bold"}},[e._v("Mængde")]),a("br"),a("label",[e._v(e._s(e.SelectedItem.amountLeft))])])],1)],1)],1),a("b-modal",{attrs:{id:"editItemModal",size:"lg",title:e.SelectedItem.itemBrand,"no-close-on-backdrop":""},on:{ok:e.editItem},model:{value:e.showEditItemModal,callback:function(t){e.showEditItemModal=t},expression:"showEditItemModal"}},[a("b-form",[a("b-row",[a("b-col",{staticStyle:{"margin-bottom":"15px"},attrs:{lg:"6"}},[a("label",[e._v("Mærke")]),a("b-form-input",{attrs:{type:"text",required:"",placeholder:"Mærke"},model:{value:e.SelectedItem.brand,callback:function(t){e.$set(e.SelectedItem,"brand",t)},expression:"SelectedItem.brand"}})],1),a("b-col",{attrs:{lg:"6"}},[a("label",[e._v("Model")]),a("b-form-input",{attrs:{type:"text",required:"",placeholder:"Model"},model:{value:e.SelectedItem.model,callback:function(t){e.$set(e.SelectedItem,"model",t)},expression:"SelectedItem.model"}})],1),a("b-col",{staticStyle:{"margin-bottom":"15px"},attrs:{lg:"6"}},[a("label",[e._v("Beskrivelse")]),a("b-form-input",{attrs:{type:"text",placeholder:"Beskrivelse"},model:{value:e.SelectedItem.description,callback:function(t){e.$set(e.SelectedItem,"description",t)},expression:"SelectedItem.description"}})],1),a("b-col",{attrs:{lg:"6"}},[a("label",[e._v("Kategori")]),a("b-form-select",{attrs:{options:e.Categories,"value-field":"id","text-field":"value"},model:{value:e.dropdownSelected,callback:function(t){e.dropdownSelected=t},expression:"dropdownSelected"}})],1),a("b-col",{attrs:{lg:"4"}},[a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.selectImageModal",modifiers:{selectImageModal:!0}}],staticStyle:{width:"130px"}},[e._v("Vælg billede")]),a("br"),a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.UploadImageModal",modifiers:{UploadImageModal:!0}}],staticStyle:{width:"130px","margin-top":"15px"}},[e._v("Upload billede")])],1),a("b-col",{attrs:{lg:"2"}},[e.showEditItemModal?a("b-img",{staticStyle:{height:"105px"},attrs:{fluid:"",src:e.SelectedItem.image.imageUri}}):a("b-img",{attrs:{fluid:"",src:"https://inventoryimagestorage.blob.core.windows.net/public-images/ImagePlaceholder.png"}})],1),a("b-col",{attrs:{lg:"6"}},[a("label",[e._v("Mængde")]),a("b-form-input",{attrs:{readonly:0==e.SelectedItem.barcodes.length&&0==e.SelectedItem.amountLeft,type:"number",placeholder:"Mængde"},model:{value:e.SelectedItem.amountLeft,callback:function(t){e.$set(e.SelectedItem,"amountLeft",t)},expression:"SelectedItem.amountLeft"}})],1)],1)],1)],1),a("b-modal",{attrs:{id:"deleteSelectedItemModal",size:"lg","no-close-on-backdrop":"",title:e.selectedItemModalTitle},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("b-button",{staticClass:"float-right",on:{click:function(t){e.showDeleteSelectedItemModal=!1}}},[e._v("Annuller")]),a("b-button",{staticClass:"float-right",staticStyle:{"margin-left":"10px"},attrs:{variant:"danger"},on:{click:e.deleteItem}},[e._v("Ja")])]},proxy:!0}]),model:{value:e.showDeleteSelectedItemModal,callback:function(t){e.showDeleteSelectedItemModal=t},expression:"showDeleteSelectedItemModal"}},[a("b-row",[a("b-col",{attrs:{lg:"12"}},[a("p",{staticStyle:{"font-size":"20px"}},[e._v("Er du sikker på at du vil fjerne "+e._s(e.SelectedItem.brand)+" "+e._s(e.SelectedItem.model)+" fra lageret?")])])],1)],1),a("b-modal",{attrs:{id:"selectImageModal",size:"lg",title:"Vælg billede","no-close-on-backdrop":"",scrollable:"","ok-only":""},scopedSlots:e._u([{key:"modal-header",fn:function(){return[a("b-row",{staticStyle:{width:"100%"}},[a("b-col",{attrs:{lg:"3"}},[a("h5",[e._v("Vælg billede")])]),a("b-col",{attrs:{lg:"9"}},[a("b-form-input",{attrs:{type:"search",placeholder:"Skriv for at søge..."},model:{value:e.imageSearch,callback:function(t){e.imageSearch=t},expression:"imageSearch"}})],1)],1)]},proxy:!0},{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("p",{staticClass:"float-left"},[e._v("Valgt billede navn: "+e._s(e.SelectedImage.imageName))]),a("b-button",{staticClass:"float-right",staticStyle:{"margin-left":"10px"},attrs:{variant:"primary"},on:{click:e.okSelectImageModal}},[e._v("Ok")]),a("b-button",{staticClass:"float-right",staticStyle:{"margin-left":"10px"},on:{click:e.closeSelectImageModal}},[e._v("Annuller")])],1)]},proxy:!0}]),model:{value:e.showSelectImageModal,callback:function(t){e.showSelectImageModal=t},expression:"showSelectImageModal"}},[a("b-form-group",[a("b-row",e._l(e.SearchedImages,(function(t){return a("b-col",{key:t.imageId,attrs:{lg:"3"}},[a("b-form-radio",{staticClass:"item-select",class:{"item-select-active":e.SelectedImage==t},attrs:{value:t},model:{value:e.selectedImage,callback:function(t){e.selectedImage=t},expression:"selectedImage"}},[a("label",{staticClass:"imageSize"},[e._v(e._s(t.imageName))]),a("b-img",{staticClass:"img-hover",staticStyle:{"max-height":"105px","max-width":"105px"},attrs:{src:t.imageUri}})],1)],1)})),1)],1)],1),a("b-modal",{attrs:{id:"UploadImageModal",size:"xl",title:"Upload billede"},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("b-button",{staticClass:"float-right",staticStyle:{"margin-left":"10px"},attrs:{variant:"primary"},on:{click:e.uploadImage}},[e._v("Ok")]),a("b-button",{staticClass:"float-right",on:{click:e.closeModal}},[e._v("Annuller")])],1)]},proxy:!0}]),model:{value:e.showUploadImageModal,callback:function(t){e.showUploadImageModal=t},expression:"showUploadImageModal"}},[a("b-form-group",[a("b-row",[a("b-col",{staticStyle:{"margin-bottom":"30px"},attrs:{lg:"12"}},[a("label",[e._v("Navn")]),a("b-form-input",{attrs:{state:e.NoImageName,type:"text",required:"",placeholder:"Navn"},model:{value:e.uploadImageName,callback:function(t){e.uploadImageName=t},expression:"uploadImageName"}}),a("b-form-invalid-feedback",{attrs:{state:e.NoImageName}},[e._v("Husk at give billedet et navn")])],1),a("b-col",{attrs:{lg:"12"}},[a("div",{staticClass:"file-upload",class:e.imageUploadBorder},[e.isUploaded?a("b-img",{staticStyle:{height:"inherit"},attrs:{src:e.uploadedImageURL}}):a("div",{ref:"uploadedImageText",staticClass:"file-upload-text"},[a("b-img",{staticClass:"fileUploadImg",attrs:{src:"https://inventoryimagestorage.blob.core.windows.net/public-images/FileUpload.png"}}),e._v("Vælg et billede... ")],1),a("input",{ref:"uploadedImage",attrs:{type:"file",id:"uploadedImage"},on:{change:function(t){return e.handleFileUpload()}}})],1)])],1)],1)],1),a("addBarcodeToItemModal",{attrs:{item:e.selectedItem},on:{updateItemBarcodes:e.getItems},model:{value:e.showAddBarcodeToItem,callback:function(t){e.showAddBarcodeToItem=t},expression:"showAddBarcodeToItem"}})],1)},ut=[],gt={name:"ConsumptionInventoryManagement",mixins:[Ce.a],data:function(){return{itemBrand:"",itemModel:"",itemDescription:"",itemBarcode:"",itemAmount:"",dropdownSelected:null,requestURL:"",modalTitle:"",addItemsBtn:"",inventoryManagement:!1,imageUploadBorder:"fileBorder",imageSearch:"",selectedImage:null,uploadImageName:"",uploadedImage:"",isUploaded:!1,uploadedImageURL:"",selectedItem:{},selectedItemModalTitle:"",showMoreAboutItem:!1,showAddItemModal:!1,showAddBarcodeToItem:!1,showEditItemModal:!1,showSelectImageModal:!1,showUploadImageModal:!1,showDeleteSelectedItemModal:!1,fields:[{key:"image",label:""},{key:"brand",label:"Mærke",sortable:!0},{key:"model",label:"Model",sortable:!0},{key:"category.categoryName",label:"Kategori",sortable:!0},{key:"amountLeft",label:"Mængde",sortable:!0},{key:"button",label:""}],isFetching:!0,failedFetches:0,search:"",currentPage:1,totalRows:0,perPage:10,sortBy:"",activeModal:"",Items:Array,notFoundMessage:""}},computed:{NoImageName:function(){return""!=this.uploadImageName},ConsumptionItems:function(){return this.$store.getters["inventoryManagement/getItems"]},ConsumptionItemAmount:function(){return this.$store.getters["inventoryManagement/getItems"].length},Images:function(){return this.$store.getters["inventoryManagement/getImages"]},Categories:function(){return this.$store.getters["inventoryManagement/getCategories"]},SelectedItem:{cache:!1,get:function(){return 0===Object.entries(this.selectedItem).length?{barcodes:[],inventory:{inventoryType:""},category:{categoryName:""},image:{imageUri:""}}:this.selectedItem}},SelectedImage:function(){return null!=this.selectedImage?this.selectedImage:{imageId:0,imageName:"Intet billede valgt",imageUri:"https://inventoryimagestorage.blob.core.windows.net/public-images/ImagePlaceholder.png"}},SearchedImages:function(){if(""==this.imageSearch)return this.Images;for(var e=[],t=0;t<this.Images.length;t++)this.Images[t].imageName.toLowerCase().includes(this.imageSearch.toLowerCase())&&e.push(this.Images[t]);return e}},methods:{ShowTable:function(){this.getCategories(),this.getImages(),this.getItems()},getCategories:function(){var e=this;this.$store.dispatch("inventoryManagement/getCategories").then((function(){console.log("Got some data, now lets show something in this component"),e.failedFetches=0})).catch((function(){console.log("no categories found"),e.totalRows=0,e.failedFetches++,e.failedFetches<=5?G=setTimeout((function(){e.getCategories()}),5e3):(e.failedFetches=0,e.notFoundMessage="Der blev ikke fundet nogen kategorier...")}))},getImages:function(){var e=this;this.$store.dispatch("inventoryManagement/getImages").then((function(){console.log("Got some data, now lets show something in this component"),e.failedFetches=0})).catch((function(){console.log("no images found"),e.totalRows=0,e.failedFetches++,e.failedFetches<=5?G=setTimeout((function(){e.getImages()}),5e3):(e.failedFetches=0,e.notFoundMessage="Der blev ikke fundet nogen billeder...")}))},uploadImage:function(){var e=this,t=new FormData;t.append("file",this.uploadedImage),t.append("imageName",this.uploadImageName),""!=this.uploadImageName&&this.$store.dispatch("inventoryManagement/uploadImage",t).then((function(t){e.selectedImage=t,console.log("SUCCESS!!"),e.closeUploadImageModal})).catch((function(e){console.log(e)}))},handleFileUpload:function(){this.imageUploadBorder="",this.uploadedImage=this.$refs.uploadedImage.files[0],this.uploadedImageURL=URL.createObjectURL(this.uploadedImage),this.isUploaded=!0},okSelectImageModal:function(){null!=this.selectedImage?this.showSelectImageModal=!1:alert("Error")},closeSelectImageModal:function(){this.selectedImage=null,this.showSelectImageModal=!1},getItems:function(){var e=this;this.isFetching=!0,this.$store.dispatch("inventoryManagement/getConsumptionItems",2).then((function(){console.log("Got some data, now lets show something in this component"),e.totalRows=e.ConsumptionItemAmount,e.Items=e.ConsumptionItems,e.isFetching=!1,e.failedFetches=0})).catch((function(){console.log("no items found"),e.Items=[],e.totalRows=0,e.failedFetches++,e.failedFetches<=5?G=setTimeout((function(){e.getItems()}),5e3):(e.isFetching=!1,e.failedFetches=0,e.notFoundMessage="Der blev ikke fundet nogen ting i lageret...")})),this.modalTitle="Tilføj ting til lager",this.addItemsBtn="Tilføj ting til lager",this.inventoryManagement=!1},addItem:function(){var e=this;this.$store.dispatch("inventoryManagement/addConsumptionItem",{inventoryId:2,brand:this.itemBrand,model:this.itemModel,description:this.itemDescription,categoryId:this.dropdownSelected,imageId:this.selectedImage.imageId}).then((function(){e.itemBrand="",e.itemModel="",e.itemDescription="",e.selectedImage=null,e.getItems()})).catch((function(e){alert(e)}))},addBarcodeToItem:function(e){Object.assign(this.selectedItem,e),this.showAddBarcodeToItem=!0},fillEditItemModal:function(e){Object.assign(this.selectedItem,e),this.dropdownSelected=e.category.categoryID,this.showEditItemModal=!0},editItem:function(){var e=this;this.$store.dispatch("inventoryManagement/editConsumptionItem",{itemId:this.selectedItem.itemId,inventoryId:2,brand:this.selectedItem.brand,model:this.selectedItem.model,description:this.selectedItem.description,categoryId:this.dropdownSelected,imageId:this.selectedItem.image.imageId,amountLeft:parseInt(this.selectedItem.amountLeft)}).then((function(){e.getItems(),e.showEditItemModal=!1})).catch((function(t){e.getItems(),alert(t)}))},selectedItemModal:function(e,t){this.selectedItemModalTitle=e.brand+" - "+e.model,Object.assign(this.selectedItem,e),this.selectedImage=this.selectedItem.image,this.dropdownSelected=e.category.categoryID,"About"==t&&(this.showMoreAboutItem=!0),"Delete"==t&&(this.showDeleteSelectedItemModal=!0)},deleteItem:function(){var e=this;this.$store.dispatch("inventoryManagement/deleteConsumptionItem",{itemId:this.selectedItem.itemId,inventoryId:2}).then((function(){e.totalRows--,e.getItems()})),this.showDeleteSelectedItemModal=!1},closeModal:function(){var e=this;this.dropdownSelected=null,this.itemBrand="",this.itemModel="",this.itemDescription="",this.itemBarcode="",this.showUploadImageModal=!1,this.uploadImageName="",this.uploadedImageURL="",this.imageUploadBorder="fileBorder",this.isUploaded=!1,G=setTimeout((function(){e.selectedImage=null}),250)},cancel:function(){clearTimeout(G),this.failedFetches=0,this.isFetching=!1},onFilter:function(e){this.totalRows=e.length,this.currentPage=1}},created:function(){this.ShowTable()},mounted:function(){this.$smoothReflow({el:"#inventoryTable"}),this.$smoothReflow({el:".tablecontainer"})}},ht=gt,bt=Object(d["a"])(ht,mt,ut,!1,null,null,null),ft=bt.exports;o["default"].use(p["a"]);var pt=[{path:"/",name:"home",component:W},{path:"/about",name:"about",component:function(){return a.e("about").then(a.bind(null,"f820"))},meta:{requiresAuth:!0}},{path:"/login",name:"login",component:ae,meta:{requiresAnonymous:!0}},{path:"/register",name:"register",component:le,meta:{requiresAnonymous:!0}},{path:"/loan",name:"loan",component:je,meta:{requiresAuth:!0}},{path:"/loanhistory",name:"loanHistory",component:Ve,meta:{requiresAuth:!0}},{path:"/consumtionhistory",name:"consumtionhistory",component:Xe,meta:{requiresAuth:!0}},{path:"/management",component:Ie,meta:{requiresAuth:!0},children:[{path:"/",name:"ManageDepartment",component:Fe},{path:"AddUsersToDepartment",name:"addUsersToDepartment",component:Ne},{path:"CategoryManagement",name:"categoryManagement",component:nt},{path:"LoanManagement",name:"loanManagement",component:dt},{path:"ConsumptionManagement",name:"consumptionManagement",component:ft}]}],vt=new p["a"]({mode:"history",base:"/",routes:pt});vt.beforeEach((function(e,t,a){e.matched.some((function(e){return e.meta.requiresAuth}))?A.getters["auth/isAuthenticated"]?a():a({path:"/login"}):e.matched.some((function(e){return e.meta.requiresAnonymous}))&&A.getters["auth/isAuthenticated"]?a({path:t.path}):a()}));var yt=vt,It=a("5f5b"),wt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-modal",{attrs:{id:"ChangePassword","no-close-on-backdrop":"",title:"Reset password."},on:{cancel:e.clearChangePasswordModal,close:e.clearChangePasswordModal},scopedSlots:e._u([{key:"modal-footer",fn:function(t){var o=t.cancel;return[a("label",[e._v("Hvis du har glemt dit kodeord bedes du spørge din instruktør om at nulstille det.")]),a("b-button",{staticClass:"float-right",staticStyle:{"margin-left":"5px"},attrs:{variant:"success"},on:{click:function(t){return e.SubmitChangePassword()}}},[e._v("OK")]),a("b-button",{staticClass:"float-right",attrs:{variant:"danger"},on:{click:function(e){return o()}}},[e._v("Cancel")])]}}]),model:{value:e.showmodal,callback:function(t){e.showmodal=t},expression:"showmodal"}},[a("b-row",[a("b-col",{staticClass:"my-1",attrs:{lg:"12"}},[a("b-form-group",{staticClass:"mb-0",attrs:{label:"Nuværende kodeord:","label-align-sm":"6","label-size":"sm"}},[a("b-input-group",{attrs:{size:"sm"}},[a("b-form-input",{attrs:{name:"CurrentPassword",type:"password",required:"",placeholder:"Nuværende kodeord"},model:{value:e.oldPassword,callback:function(t){e.oldPassword=t},expression:"oldPassword"}}),a("b-form-invalid-feedback",{attrs:{state:e.validCurrentPassword}},[e._v("Nuværende adgangskode er forkert")])],1)],1)],1),a("b-col",{staticClass:"my-1",attrs:{lg:"12"}},[a("b-form-group",{staticClass:"mb-0",attrs:{label:"Nyt kodeord:","label-align-sm":"6","label-size":"sm"}},[a("b-input-group",{attrs:{size:"sm"}},[a("b-form-input",{attrs:{name:"newPassword",type:"password",required:"",placeholder:"Nyt kodeord",state:e.validPassword},model:{value:e.newPassword,callback:function(t){e.newPassword=t},expression:"newPassword"}}),a("b-form-invalid-feedback",{attrs:{state:e.validPassword}},[e._v("Kodeordet skal have et stort bogstav og et tal eller special tegn")])],1)],1)],1),a("b-col",{staticClass:"my-1",attrs:{lg:"12"}},[a("b-form-group",{staticClass:"mb-0",attrs:{label:"Bekræft nyt kodeord:","label-align-sm":"6","label-size":"sm"}},[a("b-input-group",{attrs:{size:"sm"}},[a("b-form-input",{attrs:{name:"ConfirmNewPassword",type:"password",required:"",placeholder:"Bekræft nyt kodeord",state:e.PasswordsMatch},model:{value:e.ConfirmNewPassword,callback:function(t){e.ConfirmNewPassword=t},expression:"ConfirmNewPassword"}}),a("b-form-invalid-feedback",{attrs:{state:e.PasswordsMatch}},[e._v("Kodeordet matcher ikke")])],1)],1)],1)],1)],1)},kt=[],_t={name:"ChangePasswordModal",data:function(){return{oldPassword:"",newPassword:"",ConfirmNewPassword:"",validCurrentPassword:!0,showmodal:!1}},computed:{validPassword:function(){var e=new RegExp("^((?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])|(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[^a-zA-Z0-9])|(?=.*?[A-Z])(?=.*?[0-9])(?=.*?[^a-zA-Z0-9])|(?=.*?[a-z])(?=.*?[0-9])(?=.*?[^a-zA-Z0-9])).{8,}$");return e.test(this.newPassword)},PasswordsMatch:function(){return this.newPassword==this.ConfirmNewPassword}},methods:{SubmitChangePassword:function(){var e=this;this.$store.dispatch("auth/changePassword",{OldPassword:this.oldPassword,NewPassword:this.newPassword,ConfirmNewPassword:this.ConfirmNewPassword}).then((function(){e.clearChangePasswordModal(),e.showmodal=!1})).catch((function(t){"nuværende kode er forkert"==t.response.data&&(e.validCurrentPassword=!1)}))},clearChangePasswordModal:function(){this.oldPassword="",this.newPassword="",this.ConfirmNewPassword="",this.validCurrentPassword=!0}}},Ct=_t,Mt=Object(d["a"])(Ct,wt,kt,!1,null,null,null),St=Mt.exports,xt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-modal",{attrs:{id:"ResetPasswordModal","no-close-on-backdrop":"",title:"Reset password."},on:{ok:e.SubmitResetPassword,cancel:e.clearResetPasswordModal,close:e.clearResetPasswordModal}},[a("b-row",[a("b-col",{staticClass:"my-1",attrs:{lg:"12"}},[a("b-form-group",{staticClass:"mb-0",attrs:{label:"Nyt kodeord:","label-align-sm":"6","label-size":"sm"}},[a("b-input-group",{attrs:{size:"sm"}},[a("b-form-input",{attrs:{name:"newPassword",type:"password",required:"",placeholder:"Nyt kodeord",state:e.validPassword},model:{value:e.newPassword,callback:function(t){e.newPassword=t},expression:"newPassword"}}),a("b-form-invalid-feedback",{attrs:{state:e.validPassword}},[e._v("Kodeordet skal have et stort bogstav og et tal eller special tegn")])],1)],1)],1),a("b-col",{staticClass:"my-1",attrs:{lg:"12"}},[a("b-form-group",{staticClass:"mb-0",attrs:{label:"Bekræft nyt kodeord:","label-align-sm":"6","label-size":"sm"}},[a("b-input-group",{attrs:{size:"sm"}},[a("b-form-input",{attrs:{name:"ConfirmNewPassword",type:"password",required:"",placeholder:"Bekræft nyt kodeord",state:e.PasswordsMatch},model:{value:e.ConfirmNewPassword,callback:function(t){e.ConfirmNewPassword=t},expression:"ConfirmNewPassword"}}),a("b-form-invalid-feedback",{attrs:{state:e.PasswordsMatch}},[e._v("Kodeordet matcher ikke")])],1)],1)],1)],1)],1)},Ft=[],Ut={name:"resetPassword",data:function(){return{newPassword:"",ConfirmNewPassword:""}},props:{user:Object},computed:{validPassword:function(){var e=new RegExp("^((?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])|(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[^a-zA-Z0-9])|(?=.*?[A-Z])(?=.*?[0-9])(?=.*?[^a-zA-Z0-9])|(?=.*?[a-z])(?=.*?[0-9])(?=.*?[^a-zA-Z0-9])).{8,}$");return e.test(this.newPassword)},PasswordsMatch:function(){return this.newPassword==this.ConfirmNewPassword}},methods:{SubmitResetPassword:function(){var e=this;this.$store.dispatch("UserManagement/resetPassword",{UserId:this.user.userId,NewPassword:this.newPassword,ConfirmNewPassword:this.ConfirmNewPassword}).then((function(){e.clearResetPasswordModal()}))},clearResetPasswordModal:function(){this.newPassword="",this.ConfirmNewPassword=""}}},Pt=Ut,Lt=Object(d["a"])(Pt,xt,Ft,!1,null,null,null),Bt=Lt.exports,Rt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-modal",{attrs:{id:"SelectUserModal","no-close-on-backdrop":"",title:"Select user.",size:"lg"},scopedSlots:e._u([{key:"modal-footer",fn:function(t){var o=t.cancel;return[a("b-button",{staticClass:"float-right",attrs:{variant:"danger"},on:{click:function(e){return o()}}},[e._v("Cancel")])]}}]),model:{value:e.Showmodal,callback:function(t){e.Showmodal=t},expression:"Showmodal"}},[a("b-row",[a("b-col",{staticClass:"my-1",attrs:{lg:"6"}},[a("b-button-group",{staticClass:"mt-1"},[a("b-button",{attrs:{disabled:e.isFetching},on:{click:function(t){return e.$emit("load")}}},[e._v("Opdater tabel")]),a("b-button",{directives:[{name:"show",rawName:"v-show",value:e.isFetching,expression:"isFetching"}],on:{click:function(t){return e.$emit("cancel")}}},[e._v("Cancel")])],1)],1),a("b-col",{staticClass:"my-1",attrs:{lg:"6"}},[a("b-input-group",{attrs:{size:"sm"}},[a("b-form-input",{attrs:{type:"search",id:"filterInput",placeholder:"Skriv for at søge..."},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1)],1),a("div",{staticClass:"tablecontainer"},[a("b-table",{attrs:{id:"departmentTable",outlined:"",busy:e.isFetching,items:e.UserList,fields:e.fields,filter:e.search,"show-empty":"","per-page":e.perPage,"current-page":e.currentPage,"primary-key":"username","sort-by":e.sortBy},on:{filtered:e.onFilter,"update:sortBy":function(t){e.sortBy=t},"update:sort-by":function(t){e.sortBy=t}},scopedSlots:e._u([{key:"head(button)",fn:function(t){return[a("b-button",{on:{click:function(t){e.sortBy="",e.search=""}}},[e._v("Nulstil filter")])]}},{key:"table-busy",fn:function(){return[a("div",{staticClass:"text-center text-danger my-2"},[a("b-spinner",{staticClass:"align-middle"}),a("strong",[e._v("Loading...")])],1)]},proxy:!0},{key:"empty",fn:function(t){return[a("h4",[e._v("Vi kunne ikke finde nogen brugere der ikke er i en afdeling...")]),a("b-button",{on:{click:e.loadData}},[e._v("Refresh table")])]}},{key:"cell(button)",fn:function(t){return[a("b-col",{attrs:{lg:"4"}},[a("b-button",{attrs:{variant:"primary"},on:{click:function(a){return e.select(t.item)}}},[e._v("Vælg")])],1)]}}])})],1),e.totalRows>10?a("b-pagination",{attrs:{align:"center","total-rows":e.totalRows,"per-page":e.perPage,"aria-controls":"departmentTable"},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}}):e._e()],1)},Nt=[],Tt={name:"SelectUser",data:function(){return{search:"",fields:[{key:"username",label:"Brugernavn",sortable:!0},{key:"firstName",label:"Fornavn",sortable:!0},{key:"lastName",label:"Efternavn",sortable:!0},{key:"button",label:""}],currentPage:1,perPage:10,sortBy:"",Showmodal:!1,localValue:this.value}},model:{prop:"value",event:"input"},props:{value:{type:Object,required:!0},UserList:{type:Array,required:!0},isFetching:{type:Boolean,default:!1}},watch:{value:function(e){this.localValue=e},localValue:function(){this.$emit("input",this.localValue)}},computed:{totalRows:function(){return this.UserList.length}},methods:{select:function(e){this.localValue=e,this.Showmodal=!1},onFilter:function(e){this.totalRows=e.length,this.currentPage=1}},created:function(){}},At=Tt,$t=Object(d["a"])(At,Rt,Nt,!1,null,null,null),Dt=$t.exports,Et=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-modal",{attrs:{id:"addBarcodeToItem","no-close-on-backdrop":"",size:"lg",title:"Tilføj stregkode"},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("b-button",{staticClass:"float-right",staticStyle:{"margin-left":"10px"},attrs:{variant:"primary"},on:{click:e.addBarcode}},[e._v("Tilføj stregkode")]),a("b-button",{staticClass:"float-right",staticStyle:{"margin-left":"10px"},attrs:{variant:"danger",disabled:0==e.item.barcodes.length},on:{click:e.removeBarcode}},[e._v("Fjern stregkode")]),a("b-button",{staticClass:"float-right",staticStyle:{"margin-left":"10px"},on:{click:e.closeBarcodeModal}},[e._v("Annuller")])],1)]},proxy:!0}]),model:{value:e.showAddBarcodeToItem,callback:function(t){e.showAddBarcodeToItem=t},expression:"showAddBarcodeToItem"}},[a("label",{staticStyle:{"font-weight":"bold"}},[e._v("Stregkode")]),a("b-form-input",{attrs:{id:"addBarcode",readonly:"",required:"",placeholder:"Scan strejkode..."},model:{value:e.barcode,callback:function(t){e.barcode=t},expression:"barcode"}}),a("b-row",{staticStyle:{"margin-top":"15px"}},[a("b-col",{attrs:{lg:"3"}},[a("b-img",{staticStyle:{height:"150px"},attrs:{fluid:"",src:e.ImageUri}})],1),a("b-col",{attrs:{lg:"3"}},[a("label",{staticStyle:{"font-weight":"bold"}},[e._v("Mærke")]),a("br"),a("label",[e._v(e._s(e.item.brand))]),a("br"),a("label",{staticStyle:{"font-weight":"bold","margin-top":"15px"}},[e._v("Model")]),a("br"),a("label",[e._v(e._s(e.item.model))]),a("br")]),a("b-col",{staticStyle:{"text-align":"center"},attrs:{lg:"3"}},[a("label",{staticStyle:{"font-weight":"bold"}},[e._v("Kategori")]),a("br"),a("label",[e._v(e._s(e.Catagory))]),a("br"),a("label",{staticStyle:{"font-weight":"bold","margin-top":"15px"}},[e._v("Antal")]),a("br"),a("label",[e._v(e._s(e.item.amountLeft))])]),e.IsLoan?e._e():a("b-col",{attrs:{lg:"3"}},[a("label",{staticStyle:{"font-weight":"bold","margin-top":"80px"}},[e._v("Tilføj eller fjern")]),a("b-form-input",{attrs:{type:"number",placeholder:"Tilføj eller fjern"},model:{value:e.amount,callback:function(t){e.amount=t},expression:"amount"}})],1)],1)],1)},jt=[],Ot=(a("b64b"),{name:"AddBarcodeToItem",data:function(){return{showAddBarcodeToItem:this.value,selectedImage:"https://inventoryimagestorage.blob.core.windows.net/public-images/ImagePlaceholder.png",localIsLoanItem:this.isLoanItem,barcode:"",barcodeIsReading:!1,amount:0,localitem:this.item}},props:{item:{type:Object,required:!0},value:{type:Boolean,default:!1}},model:{prop:"value",event:"input"},watch:{value:function(e){this.showAddBarcodeToItem=e},showAddBarcodeToItem:function(){this.$emit("input",this.showAddBarcodeToItem)},amount:function(e){this.amount=""==e?0:parseInt(e)}},computed:{ImageUri:{cache:!1,get:function(){return 0==Object.keys(this.item).length?"https://inventoryimagestorage.blob.core.windows.net/public-images/ImagePlaceholder.png":this.item.image.imageUri}},Catagory:{cache:!1,get:function(){return 0===Object.keys(this.item).length?"":this.item.category.categoryName}},IsLoan:{cache:!1,get:function(){return 0===Object.keys(this.item).length?"":"Loan"==this.item.inventory.inventoryType}}},methods:{addBarcode:function(){var e=this;this.$store.dispatch("barcodeManagement/addBarcodeToItem",{itemId:this.item.itemId,barcode:this.barcode,isLoanItem:this.IsLoan,amount:this.amount}).then((function(){e.barcode="",e.amount=0,e.showAddBarcodeToItem=!1,e.$emit("updateItemBarcodes")})).catch((function(e){alert(e)}))},removeBarcode:function(){var e=this;this.$store.dispatch("barcodeManagement/removeBarcodeFromItem",{barcode:this.barcode,isConsumptionItem:!this.IsLoan,amount:this.amount}).then((function(){e.barcode="",e.amount=0,e.showAddBarcodeToItem=!1,e.$emit("updateItemBarcodes")})),this.selectedItem=Object,this.showDeleteSelectedItemModal=!1},closeBarcodeModal:function(){this.barcode="",this.amount=0,this.showAddBarcodeToItem=!1},BarcodeReader:function(e){var t=String.fromCharCode(e.keyCode);13==e.keyCode&&this.barcodeIsReading&&(this.barcodeIsReading=!1,this.getItem()),this.barcodeIsReading&&(this.barcode+=t),"ß"==t&&(this.barcodeIsReading=!0,this.barcode="","activeElement"in document&&document.activeElement.blur())}},mounted:function(){document.addEventListener("keypress",this.BarcodeReader)},destroyed:function(){document.removeEventListener("keypress",this.BarcodeReader)}}),zt=Ot,qt=Object(d["a"])(zt,Et,jt,!1,null,null,null),Gt=qt.exports,Kt=a("b1e0");o["default"].config.productionTip=!1,o["default"].use(It["a"]),o["default"].use(Kt["a"]);var Vt=localStorage.getItem("access_token");Vt&&(I.a.defaults.headers.common["Authorization"]="bearer "+Vt,A.dispatch("auth/refreshToken").catch((function(){yt.push("/login")}))),o["default"].component("ChangePassword",St),o["default"].component("ResetPassword",Bt),o["default"].component("SelectUserModal",Dt),o["default"].component("addBarcodeToItemModal",Gt),new o["default"]({router:yt,store:A,render:function(e){return e(f)}}).$mount("#app")},"5c0b":function(e,t,a){"use strict";var o=a("9c0c"),n=a.n(o);n.a},"9c0c":function(e,t,a){}});
//# sourceMappingURL=app.82882310.js.map